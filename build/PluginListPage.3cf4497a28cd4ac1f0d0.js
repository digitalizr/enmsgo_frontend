"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[4519],{50691:(se,C,s)=>{s.d(C,{fk:()=>$,yf:()=>L,Df:()=>c,Uj:()=>T,Jn:()=>N,z$:()=>D});var l=s(96540),e=s(43429),f=s(39938);function c({error:o}){const u=S(o);return l.createElement(f.E,{icon:"exclamation-triangle",text:"Disabled",color:"red",tooltip:u})}function S(o){switch(o){case e.ZK.modifiedSignature:return"Plugin disabled due to modified content";case e.ZK.invalidSignature:return"Plugin disabled due to invalid plugin signature";case e.ZK.missingSignature:return"Plugin disabled due to missing plugin signature";case null:case void 0:return"Plugin disabled";default:return`Plugin disabled due to unknown error${o?`: ${o}`:""}`}}var g=s(40845),x=s(32196);const B=o=>(0,x.css)`
  background: ${o.colors.background.primary};
  border-color: ${o.colors.border.strong};
  color: ${o.colors.text.secondary};
`;function N(){const o=(0,g.of)(B);return l.createElement(f.E,{text:"Installed",color:"orange",className:o})}var P=s(33378),G=s(67061),R=s(98624);function T({plugin:o}){const u=(0,g.of)(B);return(0,P.a)("enterprise.plugins")?l.createElement(f.E,{text:"Enterprise",color:"blue"}):l.createElement(G.B,{wrap:"wrap"},l.createElement(R.B,{status:o.signature}),l.createElement(f.E,{icon:"lock",role:"img","aria-label":"lock icon",text:"Enterprise",color:"blue",className:u,title:"Requires a Grafana Enterprise license"}))}function D({plugin:o}){const u=(0,g.of)(M);return l.createElement("p",{className:u.hasUpdate},"Update available!")}const M=o=>({hasUpdate:(0,x.css)`
      color: ${o.colors.text.secondary};
      font-size: ${o.typography.bodySmall.fontSize};
      margin-bottom: 0;
    `});function $(){return l.createElement(f.E,{icon:"exclamation-triangle",text:"Angular",color:"orange",tooltip:"This plugin uses deprecated functionality, support for which is being removed."})}function L(){return l.createElement(f.E,{icon:"exclamation-triangle",text:"Deprecated",color:"orange",tooltip:"This plugin is deprecated and no longer receives updates."})}},65965:(se,C,s)=>{s.r(C),s.d(C,{default:()=>ne});var l=s(32196),e=s(96540),f=s(24180),c=s(12131),S=s(40845),g=s(88575),x=s(21594),B=s(94354),N=s(56034),P=s(67608),G=s(17422),R=s(6320),T=s(31678),D=s(42930),M=s(32264),$=s(69529),L=s(71259),o=s(8484),u=s(66253),z=s(70255),Q=s(14110),X=s(14578),ae=s(67061),W=s(39938),Y=s(72129),V=s(43429),Z=s(66864),w=s(98624),v=s(50691);function k({plugin:n}){const m=n.hasUpdate&&!n.isCore&&n.type!==V.QE.renderer;return n.isEnterprise?e.createElement(Z.Gy,{height:"auto",wrap:!0},e.createElement(v.Uj,{plugin:n}),n.isDisabled&&e.createElement(v.Df,{error:n.error}),m&&e.createElement(v.z$,{plugin:n}),n.angularDetected&&e.createElement(v.fk,null)):e.createElement(Z.Gy,{height:"auto",wrap:!0},e.createElement(w.B,{status:n.signature}),n.isDisabled&&e.createElement(v.Df,{error:n.error}),n.isDeprecated&&e.createElement(v.yf,null),n.isInstalled&&e.createElement(v.Jn,null),m&&e.createElement(v.z$,{plugin:n}),n.angularDetected&&e.createElement(v.fk,null))}function q({alt:n,className:m,src:r,height:d}){return e.createElement("img",{src:r,className:m,alt:n,loading:"lazy",height:d})}const F="48px";function _({plugin:n,pathName:m,displayMode:r=u.fy.Grid}){const d=(0,S.of)(H),y=r===u.fy.List,j=()=>{c.Ny.getSearchObject()?.q&&(0,Q.rR)("plugins_search_user_click",{})};return e.createElement("a",{href:`${m}/${n.id}`,className:(0,l.cx)(d.container,{[d.list]:y}),onClick:j},e.createElement(q,{src:n.info.logos.small,className:d.pluginLogo,height:F,alt:""}),e.createElement("h2",{className:(0,l.cx)(d.name,"plugin-name")},n.name),e.createElement("div",{className:(0,l.cx)(d.content,"plugin-content")},e.createElement("p",null,"By ",n.orgName),e.createElement(k,{plugin:n})),e.createElement("div",{className:d.pluginType},n.type&&e.createElement(X.I,{name:u.Ip[n.type],title:`${n.type} plugin`})))}const U=({displayMode:n=u.fy.Grid,rootProps:m})=>{const r=(0,S.of)(H),d=n===u.fy.List;return e.createElement("div",{className:(0,l.cx)(r.container,{[r.list]:d}),...m},e.createElement(z.A,{containerClassName:(0,l.cx)(r.pluginLogo,(0,l.css)({lineHeight:1})),width:F,height:F}),e.createElement("h2",{className:r.name},e.createElement(z.A,{width:100})),e.createElement("div",{className:r.content},e.createElement("p",null,e.createElement(z.A,{width:120})),e.createElement(ae.B,{direction:"row"},e.createElement(W.E.Skeleton,null),e.createElement(W.E.Skeleton,null))),e.createElement("div",{className:r.pluginType},e.createElement(z.A,{width:16,height:16})))},J=(0,Y.j)(_,U),H=n=>({container:(0,l.css)({display:"grid",gridTemplateColumns:`${F} 1fr ${n.spacing(3)}`,gridTemplateRows:"auto",gap:n.spacing(2),gridAutoFlow:"row",background:n.colors.background.secondary,borderRadius:n.shape.radius.default,padding:n.spacing(3),[n.transitions.handleMotion("no-preference","reduce")]:{transition:n.transitions.create(["background-color","box-shadow","border-color","color"],{duration:n.transitions.duration.short})},"&:hover":{background:n.colors.emphasize(n.colors.background.secondary,.03)}}),list:(0,l.css)({rowGap:0,"> img":{alignSelf:"start"},"> .plugin-content":{minHeight:0,gridArea:"2 / 2 / 4 / 3","> p":{margin:n.spacing(0,0,.5,0)}},"> .plugin-name":{alignSelf:"center",gridArea:"1 / 2 / 2 / 3"}}),pluginType:(0,l.css)({gridArea:"1 / 3 / 2 / 4",color:n.colors.text.secondary}),pluginLogo:(0,l.css)({gridArea:"1 / 1 / 3 / 2",maxWidth:"100%",alignSelf:"center",objectFit:"contain"}),content:(0,l.css)({gridArea:"3 / 1 / 4 / 3",color:n.colors.text.secondary}),name:(0,l.css)({gridArea:"1 / 2 / 3 / 3",alignSelf:"center",fontSize:n.typography.h4.fontSize,color:n.colors.text.primary,margin:0,wordBreak:"normal",overflowWrap:"anywhere"})}),ee=({plugins:n,displayMode:m,isLoading:r})=>{const d=m===u.fy.List,{pathname:y}=(0,f.zy)(),j=M.$.appSubUrl+(y.endsWith("/")?y.slice(0,-1):y);return!r&&n.length===0?e.createElement($.p,{variant:"not-found",message:(0,o.t)("plugins.empty-state.message","No plugins found")}):e.createElement(L.x,{gap:3,...d?{columns:1}:{minColumnWidth:34},"data-testid":"plugin-list"},r?new Array(50).fill(null).map((I,b)=>e.createElement(J.Skeleton,{key:b,displayMode:m})):n.map(I=>e.createElement(J,{key:I.id,plugin:I,pathName:j,displayMode:m})))};var te=s(40996),t=s(67647);const a=(n,m=0,r=[])=>{const d=(0,e.useRef)(!0),y=[...r,d];return(0,te.A)(()=>{if(d.current){d.current=!1;return}return n()},m,y)},i=({value:n,onSearch:m})=>{const[r,d]=(0,e.useState)(n);return a(()=>m(r??""),500,[r]),e.createElement(t.Z,{value:r,onKeyDown:y=>{(y.key==="Enter"||y.keyCode===13)&&m(y.currentTarget.value)},placeholder:"Search Grafana plugins",onChange:y=>{d(y)},width:46})};var p=s(5129);const h=()=>({push:({query:n})=>{c.Ny.partial(n)}});var A=s(83391);function ne({route:n}){const m=(0,f.zy)(),r=(0,c.SE)(m.search),d=(0,T.useSelector)(E=>(0,G.tc)(E.navIndex,"plugins")),{displayMode:y,setDisplayMode:j}=(0,A.Tr)(),I=(0,S.of)(ue),b=h(),de=(0,A.pw)(),le=r.q?.toString()||"",K=r.filterBy?.toString()||"all",O=r.filterByType||"all",oe=r.sortBy||p.by.nameAsc,{isLoading:ge,error:re,plugins:me}=(0,A.PW)({keyword:le,type:O!=="all"?O:void 0,isInstalled:K==="installed"?!0:void 0},oe),ce=[{value:"all",label:"All"},{value:"installed",label:"Installed"}],pe=E=>{b.push({query:{sortBy:E.value}})},ie=E=>{b.push({query:{filterBy:E}})},ye=E=>{b.push({query:{filterByType:E.value}})},fe=E=>{b.push({query:{filterBy:K,filterByType:O,q:E}})};if(re)return console.error(re.message),null;const he=e.createElement("div",null,"Extend the Grafana experience with panel plugins and apps. To find more data sources go to"," ",e.createElement("a",{className:"external-link",href:`${R.b.AddNewConnection}?cat=data-source`},"Connections"),".");return e.createElement(P.Y,{navModel:d,subTitle:he},e.createElement(P.Y.Contents,null,e.createElement(D.G,{wrap:!0},e.createElement(g.D,{label:"Search"},e.createElement(i,{value:le,onSearch:fe})),e.createElement(D.G,{wrap:!0,className:I.actionBar},e.createElement(g.D,{label:"Type"},e.createElement(x.l6,{"aria-label":"Plugin type filter",value:O,onChange:ye,width:18,options:[{value:"all",label:"All"},{value:"datasource",label:"Data sources"},{value:"panel",label:"Panels"},{value:"app",label:"Applications"}]})),de?e.createElement(g.D,{label:"State"},e.createElement(B.z,{value:K,onChange:ie,options:ce})):e.createElement(N.m,{content:"This filter has been disabled because the Grafana server cannot access grafana.com",placement:"top"},e.createElement("div",null,e.createElement(g.D,{label:"State"},e.createElement(B.z,{disabled:!0,value:K,onChange:ie,options:ce})))),e.createElement(g.D,{label:"Sort"},e.createElement(x.l6,{"aria-label":"Sort Plugins List",width:24,value:oe,onChange:pe,options:[{value:"nameAsc",label:"By name (A-Z)"},{value:"nameDesc",label:"By name (Z-A)"},{value:"updated",label:"By updated date"},{value:"published",label:"By published date"},{value:"downloads",label:"By downloads"}]})),e.createElement(g.D,{label:"View"},e.createElement(B.z,{className:I.displayAs,value:y,onChange:j,options:[{value:u.fy.Grid,icon:"table",description:"Display plugins in a grid layout"},{value:u.fy.List,icon:"list-ul",description:"Display plugins in list"}]})))),e.createElement("div",{className:I.listWrap},e.createElement(ee,{plugins:me,displayMode:y,isLoading:ge}))))}const ue=n=>({actionBar:(0,l.css)({[n.breakpoints.up("xl")]:{marginLeft:"auto"}}),listWrap:(0,l.css)({marginTop:n.spacing(2)}),displayAs:(0,l.css)({svg:{marginRight:0}})})},83391:(se,C,s)=>{s.d(C,{Tr:()=>te,A5:()=>ee,wr:()=>q,m5:()=>k,PW:()=>Q,F9:()=>W,ob:()=>X,xX:()=>Y,XN:()=>F,pw:()=>w,Gp:()=>Z,qG:()=>_,SQ:()=>V});var l=s(96540),e=s(31678),f=s(5129),c=s(20701),S=s(31326),g=s(25508),x=s(54479),B=s(14110),N=s(66253);const P=t=>t.plugins,G=(0,g.Mz)(P,({items:t})=>t),R=(0,g.Mz)(P,({settings:t})=>t.displayMode),{selectAll:T,selectById:D}=S.AI.getSelectors(G),M=t=>(0,g.Mz)(T,a=>{const i=t.keyword?(0,x.xb)(t.keyword.toLowerCase()):"",p=i!==""?(0,f.TD)(a,i):null;return i&&(0,B.rR)("plugins_search",{resultsCount:p?.length}),a.filter(h=>!(i&&p==null||i&&!p?.includes(h.id)||t.type&&h.type!==t.type||t.isInstalled!==void 0&&h.isInstalled!==t.isInstalled||t.isEnterprise!==void 0&&h.isEnterprise!==t.isEnterprise))}),$=t=>(0,g.Mz)(T,a=>{const i=[];for(const p of a)p.error&&(!t||p.type===t)&&i.push({pluginId:p.id,errorCode:p.error,pluginType:p.type});return i}),L=t=>(0,g.Mz)(P,({requests:a={}})=>a[t]),o=t=>(0,g.Mz)(L(t),a=>a?.status===N.IZ.Pending),u=t=>(0,g.Mz)(L(t),a=>a?.status===N.IZ.Rejected?a?.error:null),z=t=>(0,g.Mz)(L(t),a=>a===void 0),Q=(t,a=f.by.nameAsc)=>{U();const i=(0,l.useMemo)(()=>M(t),[t]),p=(0,e.useSelector)(i),{isLoading:h,error:A}=v(),ne=(0,f.Xc)(p,a);return{isLoading:h,error:A,plugins:ne}},X=t=>(U(),H(t),(0,e.useSelector)(a=>D(a,t))),ae=t=>(J(),useSelector(a=>selectById(a,t))),W=t=>(U(),(0,e.useSelector)($(t))),Y=()=>{const t=(0,e.useDispatch)();return(a,i,p)=>t((0,c.ai)({id:a,version:i,isUpdating:p}))},V=()=>{const t=(0,e.useDispatch)();return()=>t((0,c.nT)())},Z=()=>{const t=(0,e.useDispatch)();return a=>t((0,c.JC)(a))},w=()=>(0,e.useSelector)(u(c.JJ.typePrefix))===null,v=()=>{const t=(0,e.useSelector)(o("plugins/fetchLocal")),a=(0,e.useSelector)(u("plugins/fetchLocal"));return{isLoading:t,error:a}},k=()=>{const t=(0,e.useSelector)(o(c.mj.typePrefix)),a=(0,e.useSelector)(o("plugins/fetchLocal")),i=(0,e.useSelector)(o("plugins/fetchRemote")),p=t||a||i,h=(0,e.useSelector)(u(c.mj.typePrefix));return{isLoading:p,error:h}},q=()=>{const t=(0,e.useSelector)(o(c.t5.typePrefix)),a=(0,e.useSelector)(u(c.t5.typePrefix));return{isLoading:t,error:a}},F=()=>{const t=(0,e.useSelector)(o(c.ai.typePrefix)),a=(0,e.useSelector)(u(c.ai.typePrefix));return{isInstalling:t,error:a}},_=()=>{const t=(0,e.useSelector)(o(c.JC.typePrefix)),a=(0,e.useSelector)(u(c.JC.typePrefix));return{isUninstalling:t,error:a}},U=()=>{const t=(0,e.useDispatch)(),a=(0,e.useSelector)(z(c.mj.typePrefix));(0,l.useEffect)(()=>{a&&t((0,c.mj)())},[])},J=()=>{const t=useDispatch(),a=useSelector(selectIsRequestNotFetched(fetchAllLocal.typePrefix));useEffect(()=>{a&&t(fetchAllLocal())},[])},H=t=>{const a=(0,e.useDispatch)(),i=(0,e.useSelector)(A=>D(A,t)),h=!(0,e.useSelector)(o(c.t5.typePrefix))&&i&&!i.details;(0,l.useEffect)(()=>{h&&a((0,c.t5)(t))},[i])},ee=()=>{const t=(0,e.useDispatch)();return a=>t((0,c.t5)(a))},te=()=>{const t=(0,e.useDispatch)();return{displayMode:(0,e.useSelector)(R),setDisplayMode:i=>t((0,S.qo)(i))}}}}]);

//# sourceMappingURL=PluginListPage.3cf4497a28cd4ac1f0d0.js.map