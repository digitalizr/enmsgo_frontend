"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[7914],{27914:(P,o,a)=>{a.r(o),a.d(o,{SignupPage:()=>u,default:()=>A});var e=a(96540),m=a(49785),d=a(17172),l=a(88575),r=a(10354),f=a(67061),E=a(55852),s=a(2913),O=a(3169),M=a(35538),c=a(20851),_=a(78361);const u=({queryParams:g})=>{const D=(0,O._2)(),{handleSubmit:v,formState:{errors:t},register:i,getValues:C}=(0,m.mN)({defaultValues:{email:g.email,code:g.code}}),L=async n=>{n.name===""&&delete n.name,delete n.confirm,(await(0,d.AI)().post("/api/user/signup/step2",{email:n.email,code:n.code,username:n.email,orgName:n.orgName,password:n.password,name:n.name}).catch(p=>{const h=p.data?.message||p;D.warning(h)})).code==="redirect-to-select-org"&&window.location.assign((0,s.zj)().appSubUrl+"/profile/select-org?signup=1"),window.location.assign((0,s.zj)().appSubUrl+"/")};return e.createElement(c.GU,null,e.createElement(c.qm,null,e.createElement("form",{onSubmit:v(L),style:{width:"100%"}},e.createElement(l.D,{label:"Your name"},e.createElement(r.p,{id:"user-name",...i("name"),placeholder:"(optional)"})),e.createElement(l.D,{label:"Email",invalid:!!t.email,error:t.email?.message},e.createElement(r.p,{id:"email",...i("email",{required:"Email is required",pattern:{value:M.pL,message:"Email is invalid"}}),type:"email",placeholder:"Email"})),!(0,s.zj)().autoAssignOrg&&e.createElement(l.D,{label:"Org. name"},e.createElement(r.p,{id:"org-name",...i("orgName"),placeholder:"Org. name"})),(0,s.zj)().verifyEmailEnabled&&e.createElement(l.D,{label:"Email verification code (sent to your email)"},e.createElement(r.p,{id:"verification-code",...i("code"),placeholder:"Code"})),e.createElement(l.D,{label:"Password",invalid:!!t.password,error:t?.password?.message},e.createElement(_.s,{id:"new-password",autoFocus:!0,autoComplete:"new-password",...i("password",{required:"Password is required"})})),e.createElement(l.D,{label:"Confirm password",invalid:!!t.confirm,error:t?.confirm?.message},e.createElement(_.s,{id:"confirm-new-password",autoComplete:"new-password",...i("confirm",{required:"Confirmed password is required",validate:n=>n===C().password||"Passwords must match!"})})),e.createElement(f.B,null,e.createElement(E.$n,{type:"submit"},"Submit"),e.createElement(E.z9,{fill:"text",href:(0,s.zj)().appSubUrl+"/login"},"Back to login")))))},A=u},35538:(P,o,a)=>{a.d(o,{pL:()=>m,z5:()=>l});var e=a(32264);const m=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function d(){const r=e.$.licenseInfo?.trialExpiry;return!!(r&&r>0)}const l=()=>d()&&e.$.featureToggles.featureHighlights}}]);

//# sourceMappingURL=7914.fb3b5bf2a9b2402b3ebf.js.map