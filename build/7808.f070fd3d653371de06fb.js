(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[7808],{6191:(N,x,o)=>{"use strict";o.d(x,{X:()=>P});var F=o(32196),L=o(96540),k=o(40845);const P=({children:l})=>{const p=(0,k.of)(V);return L.createElement("div",{className:p.root},l)},V=l=>({root:(0,F.css)({display:"flex",flexWrap:"wrap",alignItems:"center",gap:l.spacing(3),minHeight:l.spacing(4)})})},31347:(N,x,o)=>{"use strict";o.d(x,{Z:()=>L});var F=o(96540);const L=({grow:k,shrink:P})=>F.createElement("div",{style:{display:"block",flexGrow:k,flexShrink:P}})},22354:(N,x,o)=>{"use strict";o.d(x,{W:()=>B});var F=o(32196),L=o(96540),k=o(40845),P=o(21594),V=o(4603),l=Object.defineProperty,p=Object.defineProperties,v=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,I=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,ie=(te,O,K)=>O in te?l(te,O,{enumerable:!0,configurable:!0,writable:!0,value:K}):te[O]=K,ae=(te,O)=>{for(var K in O||(O={}))I.call(O,K)&&ie(te,K,O[K]);if(d)for(var K of d(O))y.call(O,K)&&ie(te,K,O[K]);return te},X=(te,O)=>p(te,v(O)),ee=(te,O)=>{var K={};for(var re in te)I.call(te,re)&&O.indexOf(re)<0&&(K[re]=te[re]);if(te!=null&&d)for(var re of d(te))O.indexOf(re)<0&&y.call(te,re)&&(K[re]=te[re]);return K};function B(te){var O=te,{label:K}=O,re=ee(O,["label"]);const b=(0,k.of)(oe),[de]=(0,L.useState)(()=>Math.random().toString(16).slice(2)),c={SelectContainer:H,ValueContainer:g,SingleValue:g};return L.createElement("div",{className:b.root},K&&L.createElement("label",{className:b.label,htmlFor:de},K,":","\xA0"),L.createElement(P.l6,X(ae({openMenuOnFocus:!0,inputId:de},re),{components:c})))}const H=te=>{const{children:O}=te,K=(0,k.of)(oe);return L.createElement(V.K,X(ae({},te),{className:(0,F.cx)(te.className,K.container)}),O)},g=te=>{const{className:O,children:K}=te,re=(0,k.of)(oe);return L.createElement("div",{className:(0,F.cx)(O,re.valueContainer)},K)},oe=te=>({root:(0,F.css)({display:"flex",fontSize:12,alignItems:"center"}),label:(0,F.css)({color:te.colors.text.secondary,whiteSpace:"nowrap"}),container:(0,F.css)({background:"none",borderColor:"transparent"}),valueContainer:(0,F.css)({display:"flex",alignItems:"center",flex:"initial",color:te.colors.text.secondary,fontSize:12})})},74526:()=>{(function(){"use strict";/**
 * Bindonce - Zero watches binding for AngularJs
 * @version v0.3.1
 * @link https://github.com/Pasvaz/bindonce
 * @author Pasquale Vazzana <pasqualevazzana@gmail.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */var N=angular.module("pasvaz.bindonce",[]);N.directive("bindonce",function(){var x=function(L){if(L&&L.length!==0){var k=angular.lowercase(""+L);L=!(k==="f"||k==="0"||k==="false"||k==="no"||k==="n"||k==="[]")}else L=!1;return L},o=parseInt((/msie (\d+)/.exec(angular.lowercase(navigator.userAgent))||[])[1],10);isNaN(o)&&(o=parseInt((/trident\/.*; rv:(\d+)/.exec(angular.lowercase(navigator.userAgent))||[])[1],10));var F={restrict:"AM",controller:["$scope","$element","$attrs","$interpolate",function(L,k,P,V){var l=function(d,I,y){var ie=I==="show"?"":"none",ae=I==="hide"?"":"none";d.css("display",x(y)?ie:ae)},p=function(d,I){if(angular.isObject(I)&&!angular.isArray(I)){var y=[];angular.forEach(I,function(ie,ae){ie&&y.push(ae)}),I=y}I&&d.addClass(angular.isArray(I)?I.join(" "):I)},v={watcherRemover:void 0,binders:[],group:P.boName,element:k,ran:!1,addBinder:function(d){this.binders.push(d),this.ran&&this.runBinders()},setupWatcher:function(d){var I=this;this.watcherRemover=L.$watch(d,function(y){y!==void 0&&(I.removeWatcher(),I.runBinders())},!0)},removeWatcher:function(){this.watcherRemover!==void 0&&(this.watcherRemover(),this.watcherRemover=void 0)},runBinders:function(){for(;this.binders.length>0;){var d=this.binders.shift();if(!(this.group&&this.group!=d.group)){var I=d.scope.$eval(d.interpolate?V(d.value):d.value);switch(d.attr){case"boIf":x(I)&&d.transclude(d.scope.$new(),function(X){var ee=d.element.parent(),B=d.element&&d.element[d.element.length-1],H=ee&&ee[0]||B&&B.parentNode,g=B&&B.nextSibling||null;angular.forEach(X,function(oe){H.insertBefore(oe,g)})});break;case"boSwitch":var y,ie=d.controller[0];(y=ie.cases["!"+I]||ie.cases["?"])&&(d.scope.$eval(d.attrs.change),angular.forEach(y,function(X){X.transclude(d.scope.$new(),function(ee){var B=X.element.parent(),H=X.element&&X.element[X.element.length-1],g=B&&B[0]||H&&H.parentNode,oe=H&&H.nextSibling||null;angular.forEach(ee,function(te){g.insertBefore(te,oe)})})}));break;case"boSwitchWhen":var ae=d.controller[0];ae.cases["!"+d.attrs.boSwitchWhen]=ae.cases["!"+d.attrs.boSwitchWhen]||[],ae.cases["!"+d.attrs.boSwitchWhen].push({transclude:d.transclude,element:d.element});break;case"boSwitchDefault":var ae=d.controller[0];ae.cases["?"]=ae.cases["?"]||[],ae.cases["?"].push({transclude:d.transclude,element:d.element});break;case"hide":case"show":l(d.element,d.attr,I);break;case"class":p(d.element,I);break;case"text":d.element.text(I);break;case"html":d.element.html(I);break;case"style":d.element.css(I);break;case"src":d.element.attr(d.attr,I),o&&d.element.prop("src",I);break;case"attr":angular.forEach(d.attrs,function(X,ee){var B,H;ee.match(/^boAttr./)&&d.attrs[ee]&&(B=ee.replace(/^boAttr/,"").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),H=d.scope.$eval(d.attrs[ee]),d.element.attr(B,H))});break;case"href":case"alt":case"title":case"id":case"value":d.element.attr(d.attr,I);break}}}this.ran=!0}};return v}],link:function(L,k,P,V){var l=P.bindonce?L.$eval(P.bindonce):!0;l!==void 0?V.runBinders():(V.setupWatcher(P.bindonce),k.bind("$destroy",V.removeWatcher))}};return F}),angular.forEach([{directiveName:"boShow",attribute:"show"},{directiveName:"boHide",attribute:"hide"},{directiveName:"boClass",attribute:"class"},{directiveName:"boText",attribute:"text"},{directiveName:"boBind",attribute:"text"},{directiveName:"boHtml",attribute:"html"},{directiveName:"boSrcI",attribute:"src",interpolate:!0},{directiveName:"boSrc",attribute:"src"},{directiveName:"boHrefI",attribute:"href",interpolate:!0},{directiveName:"boHref",attribute:"href"},{directiveName:"boAlt",attribute:"alt"},{directiveName:"boTitle",attribute:"title"},{directiveName:"boId",attribute:"id"},{directiveName:"boStyle",attribute:"style"},{directiveName:"boValue",attribute:"value"},{directiveName:"boAttr",attribute:"attr"},{directiveName:"boIf",transclude:"element",terminal:!0,priority:1e3},{directiveName:"boSwitch",require:"boSwitch",controller:function(){this.cases={}}},{directiveName:"boSwitchWhen",transclude:"element",priority:800,require:"^boSwitch"},{directiveName:"boSwitchDefault",transclude:"element",priority:800,require:"^boSwitch"}],function(x){var o=200;return N.directive(x.directiveName,function(){var F={priority:x.priority||o,transclude:x.transclude||!1,terminal:x.terminal||!1,require:["^bindonce"].concat(x.require||[]),controller:x.controller,compile:function(L,k,P){return function(V,l,p,v){var d=v[0],I=p.boParent;if(I&&d.group!==I){var y=d.element.parent();d=void 0;for(var ie;y[0].nodeType!==9&&y.length;){if((ie=y.data("$bindonceController"))&&ie.group===I){d=ie;break}y=y.parent()}if(!d)throw new Error("No bindonce controller: "+I)}d.addBinder({element:l,attr:x.attribute||x.directiveName,attrs:p,value:p[x.directiveName],interpolate:x.interpolate,group:I,transclude:P,controller:v.slice(1),scope:V})}}};return F})})})()},32747:()=>{/**
 * @license AngularJS v1.8.3
 * (c) 2010-2020 Google LLC. http://angularjs.org
 * License: MIT
 */(function(N,x){"use strict";function o(X,ee){if(L(X)){ee=ee||[];for(var B=0,H=X.length;B<H;B++)ee[B]=X[B]}else if(k(X)){ee=ee||{};for(var g in X)g.charAt(0)==="$"&&g.charAt(1)==="$"||(ee[g]=X[g])}return ee||X}function F(X,ee){var B=[],H=X.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)(\*\?|[?*])?/g,function(g,oe,te,O){var K=O==="?"||O==="*?",re=O==="*"||O==="*?";return B.push({name:te,optional:K}),oe=oe||"",(K?"(?:"+oe:oe+"(?:")+(re?"(.+?)":"([^/]+)")+(K?"?)?":")")}).replace(/([/$*])/g,"\\$1");return ee.ignoreTrailingSlashes&&(H=H.replace(/\/+$/,"")+"/*"),{keys:B,regexp:new RegExp("^"+H+"(?:[?#]|$)",ee.caseInsensitiveMatch?"i":"")}}var L,k,P,V,l=x.module("ngRoute",[]).info({angularVersion:"1.8.3"}).provider("$route",d).run(I),p=x.$$minErr("ngRoute"),v;function d(){L=x.isArray,k=x.isObject,P=x.isDefined,V=x.noop;function X(B,H){return x.extend(Object.create(B),H)}var ee={};this.when=function(B,H){var g=o(H);if(x.isUndefined(g.reloadOnUrl)&&(g.reloadOnUrl=!0),x.isUndefined(g.reloadOnSearch)&&(g.reloadOnSearch=!0),x.isUndefined(g.caseInsensitiveMatch)&&(g.caseInsensitiveMatch=this.caseInsensitiveMatch),ee[B]=x.extend(g,{originalPath:B},B&&F(B,g)),B){var oe=B[B.length-1]==="/"?B.substr(0,B.length-1):B+"/";ee[oe]=x.extend({originalPath:B,redirectTo:B},F(oe,g))}return this},this.caseInsensitiveMatch=!1,this.otherwise=function(B){return typeof B=="string"&&(B={redirectTo:B}),this.when(null,B),this},v=!0,this.eagerInstantiationEnabled=function(H){return P(H)?(v=H,this):v},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce","$browser",function(B,H,g,oe,te,O,K,re){var b=!1,de,c,me={routes:ee,reload:function(){b=!0;var j={defaultPrevented:!1,preventDefault:function(){this.defaultPrevented=!0,b=!1}};B.$evalAsync(function(){ue(j),j.defaultPrevented||se()})},updateParams:function(j){if(this.current&&this.current.$$route)j=x.extend({},this.current.params,j),H.path(Me(this.current.$$route.originalPath,j)),H.search(j);else throw p("norout","Tried updating route with no current route")}};return B.$on("$locationChangeStart",ue),B.$on("$locationChangeSuccess",se),me;function A(j,z){var D=z.keys,Q={};if(!z.regexp)return null;var Z=z.regexp.exec(j);if(!Z)return null;for(var le=1,ne=Z.length;le<ne;++le){var ye=D[le-1],U=Z[le];ye&&U&&(Q[ye.name]=U)}return Q}function ue(j){var z=me.current;de=Ne(),c=De(de,z),!c&&(z||de)&&B.$broadcast("$routeChangeStart",de,z).defaultPrevented&&j&&j.preventDefault()}function se(){var j=me.current,z=de;if(c)j.params=z.params,x.copy(j.params,g),B.$broadcast("$routeUpdate",j);else if(z||j){b=!1,me.current=z;var D=oe.resolve(z);re.$$incOutstandingRequestCount("$route"),D.then(W).then(q).then(function(Q){return Q&&D.then(Te).then(function(Z){z===me.current&&(z&&(z.locals=Z,x.copy(z.params,g)),B.$broadcast("$routeChangeSuccess",z,j))})}).catch(function(Q){z===me.current&&B.$broadcast("$routeChangeError",z,j,Q)}).finally(function(){re.$$completeOutstandingRequest(V,"$route")})}}function W(j){var z={route:j,hasRedirection:!1};if(j){if(j.redirectTo)if(x.isString(j.redirectTo))z.path=Me(j.redirectTo,j.params),z.search=j.params,z.hasRedirection=!0;else{var D=H.path(),Q=H.search(),Z=j.redirectTo(j.pathParams,D,Q);x.isDefined(Z)&&(z.url=Z,z.hasRedirection=!0)}else if(j.resolveRedirectTo)return oe.resolve(te.invoke(j.resolveRedirectTo)).then(function(le){return x.isDefined(le)&&(z.url=le,z.hasRedirection=!0),z})}return z}function q(j){var z=!0;if(j.route!==me.current)z=!1;else if(j.hasRedirection){var D=H.url(),Q=j.url;Q?H.url(Q).replace():Q=H.path(j.path).search(j.search).replace().url(),Q!==D&&(z=!1)}return z}function Te(j){if(j){var z=x.extend({},j.resolve);x.forEach(z,function(Q,Z){z[Z]=x.isString(Q)?te.get(Q):te.invoke(Q,null,null,Z)});var D=ge(j);return x.isDefined(D)&&(z.$template=D),oe.all(z)}}function ge(j){var z,D;return x.isDefined(z=j.template)?x.isFunction(z)&&(z=z(j.params)):x.isDefined(D=j.templateUrl)&&(x.isFunction(D)&&(D=D(j.params)),x.isDefined(D)&&(j.loadedTemplateUrl=K.valueOf(D),z=O(D))),z}function Ne(){var j,z;return x.forEach(ee,function(D,Q){!z&&(j=A(H.path(),D))&&(z=X(D,{params:x.extend({},H.search(),j),pathParams:j}),z.$$route=D)}),z||ee[null]&&X(ee[null],{params:{},pathParams:{}})}function De(j,z){return!b&&j&&z&&j.$$route===z.$$route&&(!j.reloadOnUrl||!j.reloadOnSearch&&x.equals(j.pathParams,z.pathParams))}function Me(j,z){var D=[];return x.forEach((j||"").split(":"),function(Q,Z){if(Z===0)D.push(Q);else{var le=Q.match(/(\w+)(?:[?*])?(.*)/),ne=le[1];D.push(z[ne]),D.push(le[2]||""),delete z[ne]}}),D.join("")}}]}I.$inject=["$injector"];function I(X){v&&X.get("$route")}l.provider("$routeParams",y);function y(){this.$get=function(){return{}}}l.directive("ngView",ie),l.directive("ngView",ae),ie.$inject=["$route","$anchorScroll","$animate"];function ie(X,ee,B){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(H,g,oe,te,O){var K,re,b,de=oe.autoscroll,c=oe.onload||"";H.$on("$routeChangeSuccess",A),A();function me(){b&&(B.cancel(b),b=null),K&&(K.$destroy(),K=null),re&&(b=B.leave(re),b.done(function(ue){ue!==!1&&(b=null)}),re=null)}function A(){var ue=X.current&&X.current.locals,se=ue&&ue.$template;if(x.isDefined(se)){var W=H.$new(),q=X.current,Te=O(W,function(ge){B.enter(ge,null,re||g).done(function(De){De!==!1&&x.isDefined(de)&&(!de||H.$eval(de))&&ee()}),me()});re=Te,K=q.scope=W,K.$emit("$viewContentLoaded"),K.$eval(c)}else me()}}}}ae.$inject=["$compile","$controller","$route"];function ae(X,ee,B){return{restrict:"ECA",priority:-400,link:function(H,g){var oe=B.current,te=oe.locals;g.html(te.$template);var O=X(g.contents());if(oe.controller){te.$scope=H;var K=ee(oe.controller,te);oe.controllerAs&&(H[oe.controllerAs]=K),g.data("$ngControllerController",K),g.children().data("$ngControllerController",K)}H[oe.resolveAs||"$resolve"]=te,O(H)}}}})(window,window.angular)},23345:(N,x,o)=>{o(32747),N.exports="ngRoute"},81221:()=>{/**
 * @license AngularJS v1.8.3
 * (c) 2010-2020 Google LLC. http://angularjs.org
 * License: MIT
 */(function(N,x){"use strict";var o=x.$$minErr("$sanitize"),F,L,k,P,V,l,p,v,d,I;function y(){var ae=!1,X=!1;this.$get=["$$sanitizeUri",function(D){return ae=!0,X&&L(de,re),function(Q){var Z=[];return d(Q,I(Z,function(le,ne){return!/^unsafe:/.test(D(le,ne))})),Z.join("")}}],this.enableSvg=function(D){return V(D)?(X=D,this):X},this.addValidElements=function(D){return ae||(P(D)&&(D={htmlElements:D}),q(re,D.svgElements),q(H,D.htmlVoidElements),q(de,D.htmlVoidElements),q(de,D.htmlElements)),this},this.addValidAttrs=function(D){return ae||L(ue,W(D,!0)),this},F=x.bind,L=x.extend,k=x.forEach,P=x.isArray,V=x.isDefined,l=x.$$lowercase,p=x.noop,d=ge,I=Me,v=N.Node.prototype.contains||function(D){return!!(this.compareDocumentPosition(D)&16)};var ee=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,B=/([^#-~ |!])/g,H=se("area,br,col,hr,img,wbr"),g=se("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),oe=se("rp,rt"),te=L({},oe,g),O=L({},g,se("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),K=L({},oe,se("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),re=se("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),b=se("script,style"),de=L({},H,O,K,te),c=se("background,cite,href,longdesc,src,xlink:href,xml:base"),me=se("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),A=se("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),ue=L({},c,A,me);function se(D,Q){return W(D.split(","),Q)}function W(D,Q){var Z={},le;for(le=0;le<D.length;le++)Z[Q?l(D[le]):D[le]]=!0;return Z}function q(D,Q){Q&&Q.length&&L(D,W(Q))}var Te=function(D,Q){if(ne())return ye;if(!Q||!Q.implementation)throw o("noinert","Can't create an inert html document");var Z=Q.implementation.createHTMLDocument("inert"),le=(Z.documentElement||Z.getDocumentElement()).querySelector("body");return U;function ne(){try{return!!ye("")}catch{return!1}}function ye(he){he="<remove></remove>"+he;try{var M=new D.DOMParser().parseFromString(he,"text/html").body;return M.firstChild.remove(),M}catch{return}}function U(he){return le.innerHTML=he,Q.documentMode&&j(le),le}}(N,N.document);function ge(D,Q){D==null?D="":typeof D!="string"&&(D=""+D);var Z=Te(D);if(!Z)return"";var le=5;do{if(le===0)throw o("uinput","Failed to sanitize html because the input is unstable");le--,D=Z.innerHTML,Z=Te(D)}while(D!==Z.innerHTML);for(var ne=Z.firstChild;ne;){switch(ne.nodeType){case 1:Q.start(ne.nodeName.toLowerCase(),Ne(ne.attributes));break;case 3:Q.chars(ne.textContent);break}var ye;if(!(ye=ne.firstChild)&&(ne.nodeType===1&&Q.end(ne.nodeName.toLowerCase()),ye=z("nextSibling",ne),!ye))for(;ye==null&&(ne=z("parentNode",ne),ne!==Z);)ye=z("nextSibling",ne),ne.nodeType===1&&Q.end(ne.nodeName.toLowerCase());ne=ye}for(;ne=Z.firstChild;)Z.removeChild(ne)}function Ne(D){for(var Q={},Z=0,le=D.length;Z<le;Z++){var ne=D[Z];Q[ne.name]=ne.value}return Q}function De(D){return D.replace(/&/g,"&amp;").replace(ee,function(Q){var Z=Q.charCodeAt(0),le=Q.charCodeAt(1);return"&#"+((Z-55296)*1024+(le-56320)+65536)+";"}).replace(B,function(Q){return"&#"+Q.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Me(D,Q){var Z=!1,le=F(D,D.push);return{start:function(ne,ye){ne=l(ne),!Z&&b[ne]&&(Z=ne),!Z&&de[ne]===!0&&(le("<"),le(ne),k(ye,function(U,he){var M=l(he),Re=ne==="img"&&M==="src"||M==="background";ue[M]===!0&&(c[M]!==!0||Q(U,Re))&&(le(" "),le(he),le('="'),le(De(U)),le('"'))}),le(">"))},end:function(ne){ne=l(ne),!Z&&de[ne]===!0&&H[ne]!==!0&&(le("</"),le(ne),le(">")),ne==Z&&(Z=!1)},chars:function(ne){Z||le(De(ne))}}}function j(D){for(;D;){if(D.nodeType===N.Node.ELEMENT_NODE)for(var Q=D.attributes,Z=0,le=Q.length;Z<le;Z++){var ne=Q[Z],ye=ne.name.toLowerCase();(ye==="xmlns:ns1"||ye.lastIndexOf("ns1:",0)===0)&&(D.removeAttributeNode(ne),Z--,le--)}var U=D.firstChild;U&&j(U),D=z("nextSibling",D)}}function z(D,Q){var Z=Q[D];if(Z&&v.call(Q,Z))throw o("elclob","Failed to sanitize html because the element is clobbered: {0}",Q.outerHTML||Q.outerText);return Z}}function ie(ae){var X=[],ee=I(X,p);return ee.chars(ae),X.join("")}x.module("ngSanitize",[]).provider("$sanitize",y).info({angularVersion:"1.8.3"}),x.module("ngSanitize").filter("linky",["$sanitize",function(ae){var X=/((s?ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,ee=/^mailto:/i,B=x.$$minErr("linky"),H=x.isDefined,g=x.isFunction,oe=x.isObject,te=x.isString;return function(O,K,re){if(O==null||O==="")return O;if(!te(O))throw B("notstring","Expected string but received: {0}",O);for(var b=g(re)?re:oe(re)?function(){return re}:function(){return{}},de,c=O,me=[],A,ue;de=c.match(X);)A=de[0],!de[2]&&!de[4]&&(A=(de[3]?"http://":"mailto:")+A),ue=de.index,se(c.substr(0,ue)),W(A,de[0].replace(ee,"")),c=c.substring(ue+de[0].length);return se(c),ae(me.join(""));function se(q){q&&me.push(ie(q))}function W(q,Te){var ge,Ne=b(q);me.push("<a ");for(ge in Ne)me.push(ge+'="'+Ne[ge]+'" ');H(K)&&!("target"in Ne)&&me.push('target="',K,'" '),me.push('href="',q.replace(/"/g,"&quot;"),'">'),se(Te),me.push("</a>")}}}])})(window,window.angular)},26415:(N,x,o)=>{o(81221),N.exports="ngSanitize"},12582:N=>{"use strict";function x(o){var F=this,L;if(this._au)return;function k(){F.root[F.origin.offset]?V():P()}function P(){L||(L=setInterval(function(){F.root[F.origin.offset]&&(V(),F.update())},300))}function V(){clearInterval(L),L=null}var l=F._debounce(function(){F.update()},300);this._observer=new o(function(){k(),F.update(),l()}),this.on("init",function(){F._observer.observe(F.root,{childList:!0,subtree:!0,characterData:!0}),k()}),this.on("dispose",function(){F._observer.disconnect(),V(),delete F._observer}),this._au=!0}N.exports=function(F){var L=F.MutationObserver||F.WebKitMutationObserver||F.MozMutationObserver||null;return function(){return L?(x.call(this,L),this):this}}},69786:(N,x,o)=>{"use strict";var F=o(69079).qs;N.exports=function(k){var P,V,l,p,v=this,d;p=k.screen||.9,k.forward&&(P=F(k.forward,this.clipper),d={element:P,handler:function(){var I=v.pos()+(k.delta||30);v.pos(I)},type:"click"},this._eventHandlers.push(d),this.event(d.element,d.type,d.handler,"on")),k.backward&&(V=F(k.backward,this.clipper),d={element:V,handler:function(){var I=v.pos()-(k.delta||30);v.pos(I)},type:"click"},this._eventHandlers.push(d),this.event(d.element,d.type,d.handler,"on")),k.track&&(k.track===!0?l=this.track:l=F(k.track,this.clipper),l&&(d={element:l,handler:function(I){if(I.target==l){var y=I["offset"+v.origin.x],ie=v.bar[v.origin.offsetPos],ae=0;y<ie?ae=-1:y>ie+v.bar[v.origin.offset]&&(ae=1);var X=v.pos()+ae*p*v.scroller[v.origin.client];v.pos(X)}},type:"mousedown"},this._eventHandlers.push(d),this.event(d.element,d.type,d.handler,"on")))}},92747:(N,x,o)=>{"use strict";var F=function(){return this||(0,eval)("this")}(),L=F&&F.window||F,k=o(69079).f0,P=o(69079).AH,V=o(69079).WQ,l=o(69079).zy,p=o(69079).rm,v=o(69079).o8,d=o(69079).qs,I=O,y=["left","top","right","bottom","width","height"],ie=[],ae={v:{x:"Y",pos:y[1],oppos:y[3],crossPos:y[0],crossOpPos:y[2],size:y[5],crossSize:y[4],crossMinSize:"min-"+y[4],crossMaxSize:"max-"+y[4],client:"clientHeight",crossClient:"clientWidth",scrollEdge:"scrollLeft",offset:"offsetHeight",crossOffset:"offsetWidth",offsetPos:"offsetTop",scroll:"scrollTop",scrollSize:"scrollHeight"},h:{x:"X",pos:y[0],oppos:y[2],crossPos:y[1],crossOpPos:y[3],size:y[4],crossSize:y[5],crossMinSize:"min-"+y[5],crossMaxSize:"max-"+y[5],client:"clientWidth",crossClient:"clientHeight",scrollEdge:"scrollTop",offset:"offsetWidth",crossOffset:"offsetHeight",offsetPos:"offsetLeft",scroll:"scrollLeft",scrollSize:"scrollWidth"}},X=17,ee=15,B=/[\s\S]*Macintosh[\s\S]*\) Gecko[\s\S]*/,H=B.test(L.navigator&&L.navigator.userAgent),g,oe,te;function O(A){var ue=!!A,se=A&&A[0]||A,W=typeof A=="string"||se instanceof HTMLElement,q=W?{root:A}:v(A),Te,ge,Ne={direction:"v",barOnCls:"_scrollbar",resizeDebounce:0,event:k,cssGuru:!1,impact:"scroller",position:"static"};q=q||{};for(var De in Ne)q[De]==null&&(q[De]=Ne[De]);Te=this&&this instanceof L.jQuery,q._chain?ge=q.root:Te?q.root=ge=this[0]:ge=d(q.root||q.scroller);var Me=de(ge,q.direction),j=+Me;if(q.index=j,j==j&&Me!==null&&ie[j])return ie[j];q.root&&q.scroller?q.scroller=d(q.scroller,ge):q.scroller=ge,q.root=ge;var z=c(q);return z.autoUpdate&&z.autoUpdate(),z}function K(A,ue){var se=0,W=A;for((W.length===void 0||W===L)&&(W=[W]);W[se];)ue.call(this,W[se],se),se++}function re(){return new Date().getTime()}function b(A,ue,se){A._eventHandlers=A._eventHandlers||[{element:A.scroller,handler:function(W){A.scroll(W)},type:"scroll"},{element:A.root,handler:function(){A.update()},type:"transitionend animationend"},{element:A.scroller,handler:function(){A.update()},type:"keyup"},{element:A.bar,handler:function(W){W.preventDefault(),A.selection(),A.drag.now=1,A.draggingCls&&V(A.root,A.draggingCls)},type:"touchstart mousedown"},{element:document,handler:function(){A.selection(1),A.drag.now=0,A.draggingCls&&p(A.root,A.draggingCls)},type:"mouseup blur touchend"},{element:document,handler:function(W){W.button!=2&&A._pos0(W)},type:"touchstart mousedown"},{element:document,handler:function(W){A.drag.now&&A.drag(W)},type:"mousemove touchmove"},{element:L,handler:function(){A.update()},type:"resize"},{element:A.root,handler:function(){A.update()},type:"sizeChange"},{element:A.clipper,handler:function(){A.clipperOnScroll()},type:"scroll"}],K(A._eventHandlers,function(W){if(W.element)if(W.element.length&&W.element!==L)for(var q=0;q<W.element.length;q++)ue(W.element[q],W.type,W.handler,se);else ue(W.element,W.type,W.handler,se)})}function de(A,ue,se,W){var q="data-baron-"+ue+"-id";return se=="on"?A.setAttribute(q,W):se=="off"&&A.removeAttribute(q),A.getAttribute(q)}function c(A){var ue=new O.prototype.constructor(A);return b(ue,A.event,"on"),de(ue.root,A.direction,"on",ie.length),ie.push(ue),ue.update(),ue}function me(A){if(this.events&&this.events[A])for(var ue=0;ue<this.events[A].length;ue++){var se=Array.prototype.slice.call(arguments,1);this.events[A][ue].apply(this,se)}}O.prototype={_debounce:function(A,ue){var se=this,W,q,Te=function(){if(se._disposed){clearTimeout(W),W=se=null;return}var ge=re()-q;ge<ue&&ge>=0?W=setTimeout(Te,ue-ge):(W=null,A())};return function(){q=re(),W||(W=setTimeout(Te,ue))}},constructor:function(A){var ue,se,W,q,Te,ge,Ne;ge=re(),this.params=A,this.event=A.event,this.events={},this.root=A.root,this.scroller=d(A.scroller),this.bar=d(A.bar,this.root),W=this.track=d(A.track,this.root),!this.track&&this.bar&&(W=this.bar.parentNode),this.clipper=this.scroller.parentNode,this.direction=A.direction,this.rtl=A.rtl,this.origin=ae[this.direction],this.barOnCls=A.barOnCls,this.scrollingCls=A.scrollingCls,this.draggingCls=A.draggingCls,this.impact=A.impact,this.position=A.position,this.rtl=A.rtl,this.barTopLimit=0,this.resizeDebounce=A.resizeDebounce;function De(U){var he=this.barMinSize||20,M=U;M>0&&M<he&&(M=he),this.bar&&P(this.bar,this.origin.size,parseInt(M,10)+"px")}function Me(U){if(this.bar){var he=P(this.bar,this.origin.pos),M=+U+"px";M&&M!=he&&P(this.bar,this.origin.pos,M)}}function j(){return W[this.origin.client]-this.barTopLimit-this.bar[this.origin.offset]}function z(U){return U*j.call(this)+this.barTopLimit}function D(U){return(U-this.barTopLimit)/j.call(this)}this.cursor=function(U){return U["client"+this.origin.x]||(((U.originalEvent||U).touches||{})[0]||{})["page"+this.origin.x]};function Q(){return!1}if(this.pos=function(U){var he="page"+this.origin.x+"Offset",M=this.scroller[he]?he:this.origin.scroll;return U!==void 0&&(this.scroller[M]=U),this.scroller[M]},this.rpos=function(U){var he=this.scroller[this.origin.scrollSize]-this.scroller[this.origin.client],M;return U?M=this.pos(U*he):M=this.pos(),M/(he||1)},this.barOn=function(U){if(this.barOnCls){var he=this.scroller[this.origin.client]>=this.scroller[this.origin.scrollSize];U||he?l(this.root,this.barOnCls)&&p(this.root,this.barOnCls):l(this.root,this.barOnCls)||V(this.root,this.barOnCls)}},this._pos0=function(U){se=this.cursor(U)-ue},this.drag=function(U){var he=D.call(this,this.cursor(U)-se),M=this.scroller[this.origin.scrollSize]-this.scroller[this.origin.client];this.scroller[this.origin.scroll]=he*M},this.selection=function(U){this.event(document,"selectpos selectstart",Q,U?"off":"on")},this.resize=function(){var U=this,he=U.resizeDebounce===void 0?300:U.resizeDebounce,M=0;re()-ge<he&&(clearTimeout(q),M=he);function Re(){var Ge=U.scroller[U.origin.crossOffset],Se=U.scroller[U.origin.crossClient],_e=0,He,Fe;if(H?_e=ee:Se>0&&Ge===0&&(Ge=Se+X),Ge)if(U.barOn(),U.impact=="scroller"){var et=Ge-Se+_e;if(U.position=="static")He=P(U.scroller,U.origin.crossSize),Fe=U.clipper[U.origin.crossClient]+et+"px",He!=Fe&&U._setCrossSizes(U.scroller,Fe);else{var tt={},nt=U.rtl?"Left":"Right";U.direction=="h"&&(nt="Bottom"),tt["padding"+nt]=et+"px",P(U.scroller,tt)}}else He=P(U.clipper,U.origin.crossSize),Fe=Se+"px",He!=Fe&&U._setCrossSizes(U.clipper,Fe);Array.prototype.unshift.call(arguments,"resize"),me.apply(U,arguments),ge=re()}M?q=setTimeout(Re,M):Re()},this.updatePositions=function(U){var he,M=this;M.bar&&(he=(W[M.origin.client]-M.barTopLimit)*M.scroller[M.origin.client]/M.scroller[M.origin.scrollSize],(U||parseInt(Ne,10)!=parseInt(he,10))&&(De.call(M,he),Ne=he),ue=z.call(M,M.rpos()),Me.call(M,ue)),Array.prototype.unshift.call(arguments,"scroll"),me.apply(M,arguments)},this.scroll=function(){var U=this;U.updatePositions(),U.scrollingCls&&(Te||V(U.root,U.scrollingCls),clearTimeout(Te),Te=setTimeout(function(){p(U.root,U.scrollingCls),Te=void 0},300))},this.clipperOnScroll=function(){this.rtl?this.clipper[this.origin.scrollEdge]=this.clipper[this.origin.scrollSize]:this.clipper[this.origin.scrollEdge]=0},this._setCrossSizes=function(U,he){var M={};M[this.origin.crossSize]=he,M[this.origin.crossMinSize]=he,M[this.origin.crossMaxSize]=he,P(U,M)},this._dumbCss=function(U){if(!A.cssGuru){var he=U?"hidden":null,M=U?"none":null;P(this.clipper,{overflow:he,msOverflowStyle:M,position:this.position=="static"?"":"relative"});var Re=U?"scroll":null,Ge=this.direction=="v"?"y":"x",Se={};Se["overflow-"+Ge]=Re,Se["box-sizing"]="border-box",Se.margin="0",Se.border="0",this.position=="absolute"&&(Se.position="absolute",Se.top="0",this.direction=="h"?Se.left=Se.right="0":(Se.bottom="0",Se.right=this.rtl?"0":"",Se.left=this.rtl?"":"0")),P(this.scroller,Se)}},this._dumbCss(!0),H){var Z="paddingRight",le={},ne=L.getComputedStyle(this.scroller)[[Z]];A.direction=="h"?Z="paddingBottom":A.rtl&&(Z="paddingLeft");var ye=parseInt(ne,10);ye!=ye&&(ye=0),le[Z]=ee+ye+"px",P(this.scroller,le)}return this},update:function(A){return me.call(this,"upd",A),this.resize(1),this.updatePositions(1),this},dispose:function(){b(this,this.event,"off"),de(this.root,this.params.direction,"off"),this.params.direction=="v"?this._setCrossSizes(this.scroller,""):this._setCrossSizes(this.clipper,""),this._dumbCss(!1),this.barOn(!0),me.call(this,"dispose"),ie[this.params.index]=null,this.params=null,this._disposed=!0},on:function(A,ue,se){for(var W=A.split(" "),q=0;q<W.length;q++)W[q]=="init"?ue.call(this,se):(this.events[W[q]]=this.events[W[q]]||[],this.events[W[q]].push(function(Te){ue.call(this,Te||se)}))},baron:function(A){return A.root=this.params.root,A.scroller=this.params.scroller,A.direction=this.params.direction=="v"?"h":"v",A._chain=!0,O(A)}},O.prototype.constructor.prototype=O.prototype,O.noConflict=function(){return L.baron=I,O},O.version="3.0.1",O.prototype.autoUpdate=o(12582)(L),O.prototype.fix=o(41197),O.prototype.controls=o(69786),N.exports=O},41197:(N,x,o)=>{"use strict";var F=o(37420),L=o(69079).AH,k=o(69079).WQ,P=o(69079).rm;N.exports=function(l){var p,v,d={outside:"",inside:"",before:"",after:"",past:"",future:"",radius:0,minView:0},I=[],y=[],ie=[],ae=this.scroller,X=this.event,ee=this;function B(O,K,re){var b=K,de=re==1?"pos":"oppos";v<(d.minView||0)&&(b=void 0),L(p[O],this.origin.pos,""),L(p[O],this.origin.oppos,""),P(p[O],d.outside),b!==void 0&&(b+="px",L(p[O],this.origin[de],b),k(p[O],d.outside))}function H(O){try{var K=document.createEvent("WheelEvent");K.initWebKitWheelEvent(O.originalEvent.wheelDeltaX,O.originalEvent.wheelDeltaY),ae.dispatchEvent(K),O.preventDefault()}catch{}}function g(O){var K;for(var re in O)d[re]=O[re];if(d.elements instanceof HTMLElement?p=[d.elements]:typeof d.elements=="string"?p=this.scroller.querySelectorAll(d.elements):d.elements&&d.elements[0]instanceof HTMLElement&&(p=d.elements),p){v=this.scroller[this.origin.client];for(var b=0;b<p.length;b++)K={},K[this.origin.size]=p[b][this.origin.offset]+"px",p[b].parentNode!==this.scroller&&L(p[b].parentNode,K),K={},K[this.origin.crossSize]=p[b].parentNode[this.origin.crossClient]+"px",L(p[b],K),v-=p[b][this.origin.offset],ie[b]=p[b].parentNode[this.origin.offsetPos],I[b]=I[b-1]||0,y[b]=y[b-1]||Math.min(ie[b],0),p[b-1]&&(I[b]+=p[b-1][this.origin.offset],y[b]+=p[b-1][this.origin.offset]),b==0&&ie[b]==0||(this.event(p[b],"mousewheel",H,"off"),this.event(p[b],"mousewheel",H));d.limiter&&p[0]&&(this.track&&this.track!=this.scroller?(K={},K[this.origin.pos]=p[0].parentNode[this.origin.offset]+"px",L(this.track,K)):this.barTopLimit=p[0].parentNode[this.origin.offset],this.scroll()),d.limiter===!1&&(this.barTopLimit=0)}var de={element:p,handler:function(){for(var me=this.parentNode,A=me.offsetTop,ue,se=0;se<p.length;se++)p[se]===this&&(ue=se);var W=A-I[ue];d.scroll?d.scroll({x1:ee.scroller.scrollTop,x2:W}):ee.scroller.scrollTop=W},type:"click"};if(d.clickable){this._eventHandlers.push(de);for(var c=0;c<de.element.length;c++)X(de.element[c],de.type,de.handler,"on")}}this.on("init",g,l);var oe=[],te=[];return this.on("init scroll",function(){var O,K,re,b;if(p){var de;for(b=0;b<p.length;b++)O=0,ie[b]-this.pos()<y[b]+d.radius?(O=1,K=I[b]):ie[b]-this.pos()>y[b]+v-d.radius?(O=2,K=this.scroller[this.origin.client]-p[b][this.origin.offset]-I[b]-v):(O=3,K=void 0),re=!1,(ie[b]-this.pos()<y[b]||ie[b]-this.pos()>y[b]+v)&&(re=!0),(O!=oe[b]||re!=te[b])&&(B.call(this,b,K,O),oe[b]=O,te[b]=re,de=!0);if(de)for(b=0;b<p.length;b++)oe[b]==1&&d.past&&(k(p[b],d.past),P(p[b],d.future)),oe[b]==2&&d.future&&(k(p[b],d.future),P(p[b],d.past)),oe[b]==3&&(P(p[b],d.past),P(p[b],d.future),k(p[b],d.inside)),oe[b]!=oe[b+1]&&oe[b]==1?(k(p[b],d.before),P(p[b],d.after)):oe[b]!=oe[b-1]&&oe[b]==2?(k(p[b],d.after),P(p[b],d.before)):(P(p[b],d.before),P(p[b],d.after)),d.grad&&(te[b]?k(p[b],d.grad):P(p[b],d.grad))}}),this.on("resize upd",function(O){g.call(this,O&&O.fix)}),this}},37420:N=>{N.exports=function(o,F,L){var k=console[o]||console.log,P=["Baron: "+F,L];Function.prototype.apply.call(k,console,P)}},69079:N=>{"use strict";var x,o=!1;try{var F=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("test",null,F)}catch{}N.exports.f0=function(P,V,l,p){var v=V.split(" "),d=p=="on"?"add":"remove";v.forEach(function(I){var y=!1;["scroll","touchstart","touchmove"].indexOf(I)!=-1&&o&&(y={passive:!0}),P[d+"EventListener"](I,l,y)})};function L(k,P){for(var V in k)k.hasOwnProperty(V)&&P(V,k[V])}N.exports.AH=function(P,V,l){var p;if(l===void 0){if(typeof V=="string")return P.style[V];p=V}else p={},p[V]=l;L(p,function(v,d){P.style[v]=d})},N.exports.WQ=function(P,V){V&&P.classList.add(V)},N.exports.rm=function(P,V){V&&P.classList.remove(V)},N.exports.zy=function(P,V){return V?P.classList.contains(V):!1},N.exports.o8=function(P){var V={},l=P||{};return L(l,function(p,v){V[p]=v}),V},N.exports.qs=function(P,V){if(P instanceof HTMLElement)return P;var l=V||document;return l.querySelector(P)},x=L},27808:(N,x,o)=>{"use strict";o.d(x,{AngularApp:()=>Ji});var F=o(92747),L=o.n(F),k=o(64423),P=o(26272),V=o(3591),l=o(67982),p=o(28444);const v=`
  <ng-transclude class="panel-height-helper"></ng-transclude>
`;l.m7.directive("grafanaPanel",["$timeout",t=>({restrict:"E",template:v,transclude:!0,scope:{ctrl:"="},link:(e,r)=>{const n=e.ctrl,i=e.ctrl.panel,a=new k.yU;let s;function u(){s&&s.update()}n.events.on(P.ee.componentDidMount,()=>{if(n.__proto__.constructor.scrollable){const m="baron baron__root baron__clipper panel-content--scrollable",C="baron__scroller",h=`
            <div class="baron__track">
              <div class="baron__bar"></div>
            </div>
          `,S=r,T=r.find(":first").find(":first");S.addClass(m),$(h).appendTo(S),T.addClass(C),s=L()({root:S[0],scroller:T[0],bar:".baron__bar",barOnCls:"_scrollbar",scrollingCls:"_scrolling"}),s.scroll()}});function f(){n.height=e.$parent.$parent.size.height,n.width=e.$parent.$parent.size.width}f(),a.add(i.events.subscribe(V._,()=>{f(),n.events.emit("refresh")})),a.add(i.events.subscribe(p.XM,m=>{m.payload?.fromAngular||(f(),t(()=>{u(),n.events.emit("render")}))})),a.add(n.events.subscribe(p.XM,m=>{m.payload&&(m.payload.fromAngular=!0,i.events.publish(m))})),e.$on("$destroy",()=>{r.off(),a.unsubscribe(),n.events.emit(P.ee.panelTeardown),n.events.removeAllListeners(),s&&s.dispose()}),i.events.publish(p.vk)}})]);var d=o(59559),I=o(7025),y=o.n(I);const ie=y().module("grafana.directives"),ae={};ie.directive("panelEditorTab",["dynamicDirectiveSrv",X]);function X(t){return t.create({scope:{ctrl:"=",editorTab:"="},directive:e=>{const r=e.ctrl.pluginId,n=e.editorTab.title.toLowerCase().replace(" ","-").replace("&","").replace(" ","").replace(" ","-");if(ae[r]){if(ae[r][n])return ae[r][n]}else ae[r]=[];const i={fn:()=>e.editorTab.directiveFn(),name:`panel-editor-tab-${r}${n}`};return ae[r][n]=i,i}})}class ee{constructor(){this.hasTextEditMode=!1}$onInit(){this.panelCtrl=this.queryCtrl.panelCtrl,this.target=this.queryCtrl.target,this.panel=this.panelCtrl.panel,this.hasTextEditMode&&this.queryCtrl.toggleEditorMode&&(this.panelCtrl.toggleEditorMode=this.queryCtrl.toggleEditorMode.bind(this.queryCtrl)),this.queryCtrl.getCollapsedText&&(this.panelCtrl.getCollapsedText=this.queryCtrl.getCollapsedText.bind(this.queryCtrl))}}l.m7.directive("queryEditorRow",B);function B(){return{restrict:"E",controller:ee,bindToController:!0,controllerAs:"ctrl",templateUrl:"public/app/angular/panel/partials/query_editor_row.html",transclude:!0,scope:{queryCtrl:"=",canCollapse:"=",hasTextEditMode:"="}}}var H=o(50410),g=o(2543),oe=o.n(g),te=o(47232),O=o(23989);l.Ay.filter("stringSort",()=>t=>t.sort()),l.Ay.filter("slice",()=>(t,e,r)=>(0,g.isUndefined)(t)?t:t.slice(e,r)),l.Ay.filter("stringify",()=>t=>(0,g.isObject)(t)&&!(0,g.isArray)(t)?y().toJson(t):(0,g.isNull)(t)?null:t.toString()),l.Ay.filter("moment",()=>(t,e)=>{switch(e){case"ago":return(0,te.KQ)(t).fromNow()}return(0,te.KQ)(t).fromNow()});function K(t=(0,O.w)()){const e=(r,n)=>{let i;return n.ctrl?i=(n.ctrl.panel||n.ctrl.row).scopedVars:i=n.row.scopedVars,t.replaceWithText(r,i)};return e.$stateful=!0,e}l.Ay.filter("interpolateTemplateVars",K);const re={};class b{constructor(){}set(){console.warn("old deprecated alert srv being used")}}l.Ay.service("alertSrv",b);class de{constructor(e){this.$compile=e}static{this.$inject=["$compile"]}addDirective(e,r,n){const i=y().element(document.createElement(r));this.$compile(i)(n),e.empty(),e.append(i)}link(e,r,n,i){const a=i.directive(e);if(!a||!a.fn){r.empty();return}a.fn.registered||(l.Ay.directive(n.$normalize(a.name),a.fn),a.fn.registered=!0),this.addDirective(r,a.name,e)}create(e){return{restrict:"E",scope:e.scope,link:(n,i,a)=>{if(e.watchPath){let s=null;n.$watch(e.watchPath,()=>{s&&s.$destroy(),s=n.$new(),this.link(s,i,a,e)})}else this.link(n,i,a,e)}}}}l.Ay.service("dynamicDirectiveSrv",de);var c=o(96540),me=o(5338);function A(t,e){if(y().isFunction(t))return t;if(!t)throw new Error("ReactComponent name attribute must be specified");let r;try{r=e.get(t)}catch{}if(!r)try{r=t.split(".").reduce((n,i)=>n[i],window)}catch{}if(!r)throw Error("Cannot find react component "+t);return r}function ue(t,e){if(t.wrappedInApply)return t;const r=function(){const n=arguments,i=e.$root.$$phase;return i==="$apply"||i==="$digest"?t.apply(null,n):e.$apply(()=>t.apply(null,n))};return r.wrappedInApply=!0,r}function se(t,e,r){return Object.keys(t||{}).reduce((n,i)=>{const a=t[i],s=(r||{})[i]||{};return n[i]=y().isFunction(a)&&s.wrapApply!==!1?ue(a,e):a,n},{})}function W(t,e,r,n){const i=y().isFunction(e.$watchCollection),a=y().isFunction(e.$watchGroup),s=[];for(const u of r){const f=Ne(u),m=Me(t,u);!f||f.match(/\(.*\)/)||m==="one-time"||(m==="collection"&&i?e.$watchCollection(f,n):m==="reference"&&a?s.push(f):e.$watch(f,n,m!=="reference"))}t==="one-time"&&n(),s.length&&e.$watchGroup(s,n)}function q(t,e,r,n){r.$evalAsync(()=>{n.render(c.createElement(t,e))})}function Te(t){return Array.isArray(t)?t[0]:t}function ge(t){return Array.isArray(t)?t[1]:{}}function Ne(t){return Array.isArray(t)?t[0]:t}function De(t,e){const r=Object.keys(t).find(n=>n.toLowerCase()===e.toLowerCase()||(0,g.kebabCase)(n)===(0,g.kebabCase)(e));return t[r]}function Me(t,e){return Array.isArray(e)&&y().isObject(e[1])&&e[1].watchDepth||t}const j=t=>({restrict:"E",replace:!0,link:function(e,r,n){const i=A(n.name,t),a=(0,me.H)(r[0]),s=()=>{const u=e.$eval(n.props),f=se(u,e);q(i,f,e,a)};n.props?W(n.watchDepth,e,[n.props],s):s(),e.$on("$destroy",()=>{n.onScopeDestroy?e.$eval(n.onScopeDestroy,{unmountComponent:a.unmount.bind(this)}):a.unmount()})}}),z=t=>(e,r,n,i)=>{const a={restrict:"E",replace:!0,link:function(s,u,f){const m=A(e,t),C=(0,me.H)(u[0]);r=r||Object.keys(m.propTypes||{});const h=()=>{let T={};const G={};r.forEach(pe=>{const w=Te(pe);T[w]=s.$eval(De(f,w)),G[w]=ge(pe)}),T=se(T,s,G),T=y().extend({},T,i),q(m,T,s,C)},S=r.map(T=>Array.isArray(T)?[De(f,T[0]),ge(T)]:De(f,T));r.length?W(f.watchDepth,s,S,h):h(),s.$on("$destroy",()=>{f.onScopeDestroy?s.$eval(f.onScopeDestroy,{unmountComponent:C.unmount.bind(this)}):C.unmount()})}};return y().extend(a,n)},D=y().module("react",[]);D.directive("reactComponent",["$injector",j]),D.factory("reactDirective",["$injector",z]),l.Ay.service("uiSegmentSrv",["$sce","templateSrv",Q]);function Q(t,e){const r=this;class n{constructor(a){if(a==="*"||a.value==="*"){this.value="*",this.html=t.trustAsHtml('<i class="fa fa-asterisk"><i>'),this.type=a.type,this.expandable=!0;return}if((0,g.isString)(a)){this.value=a,this.html=t.trustAsHtml(e.highlightVariablesAsHtml(this.value));return}this.text=a.value,this.cssClass=a.cssClass,this.custom=a.custom,this.type=a.type,this.fake=a.fake,this.value=a.value,this.selectMode=a.selectMode,this.expandable=a.expandable,this.html=a.html||t.trustAsHtml(e.highlightVariablesAsHtml(this.value))}}this.getSegmentForValue=function(i,a){return i?this.newSegment(i):this.newSegment({value:a,fake:!0})},this.newSelectMeasurement=()=>new n({value:"select measurement",fake:!0}),this.newFake=(i,a,s)=>new n({value:i,fake:!0,type:a,cssClass:s}),this.newSegment=i=>new n(i),this.newKey=i=>new n({value:i,type:"key",cssClass:"query-segment-key"}),this.newKeyValue=i=>new n({value:i,type:"value",cssClass:"query-segment-value"}),this.newCondition=i=>new n({value:i,type:"condition",cssClass:"query-keyword"}),this.newOperator=i=>new n({value:i,type:"operator",cssClass:"query-segment-operator"}),this.newOperators=i=>(0,g.map)(i,a=>new n({value:a,type:"operator",cssClass:"query-segment-operator"})),this.transformToSegments=(i,a)=>s=>{const u=(0,g.map)(s,f=>r.newSegment({value:f.text,expandable:f.expandable}));return i&&(0,g.each)(e.getVariables(),f=>{(a===void 0||a===f.type)&&u.unshift(r.newSegment({type:"value",value:"$"+f.name,expandable:!0}))}),u},this.newSelectMetric=()=>new n({value:"select metric",fake:!0}),this.newPlusButton=()=>new n({fake:!0,html:'<i class="fa fa-plus "></i>',type:"plus-button",cssClass:"query-part"})}var Z=o(66899),le=o.n(Z);l.Ay.service("popoverSrv",["$compile","$rootScope","$timeout",ne]);function ne(t,e,r){let n=null;this.close=()=>{n&&n.close()},this.show=i=>{n&&(n.close(),n=null);const a=(0,g.extend)(e.$new(!0),i.model);let s;const u=()=>{setTimeout(()=>{a.$destroy(),s.tether&&s.destroy(),i.onClose&&i.onClose()}),n=null};a.dismiss=()=>{s.close()};const f=document.createElement("div");return f.innerHTML=i.template,t(f)(a),r(()=>{s=new(le())({target:i.element,content:f,position:i.position,classes:i.classNames||"drop-popover",openOn:i.openOn,hoverCloseDelay:200,tetherOptions:{constraints:[{to:"scrollParent",attachment:"together"}]}}),s.on("close",()=>{u()}),n=s,n.open()},100),()=>{s&&s.close()}}}class ye{constructor(e){this.$timeout=e,this.timers=[]}static{this.$inject=["$timeout"]}register(e){return this.timers.push(e),e}cancel(e){this.timers=(0,g.without)(this.timers,e),this.$timeout.cancel(e)}cancelAll(){(0,g.each)(this.timers,e=>{this.$timeout.cancel(e)}),this.timers=[]}}l.Ay.service("timer",ye);class U{constructor(e,r){this.$compile=e,this.$rootScope=r}static{this.$inject=["$compile","$rootScope"]}load(e,r,n){const i=this.$rootScope.$new();(0,g.assign)(i,r);const a=this.$compile(n)(i);return y().element(e).append(a),{destroy:()=>{i.$destroy(),a.remove()},digest:()=>{i.$$phase||i.$digest()},getScope:()=>i}}}l.Ay.service("angularLoader",U);var he=o(34796),M=o.n(he);const Re=M()(window);M().fn.place_tt=(()=>{const t={offset:5};return function(e,r,n){return n=M().extend(!0,{},t,n),this.each(()=>{const i=M()(this);let a,s;i.addClass("grafana-tooltip"),M()("#tooltip").remove(),i.appendTo(document.body),n.compile&&y().element(document).injector().invoke(["$compile","$rootScope",(m,C)=>{const h=C.$new(!0);(0,g.extend)(h,n.scopeData),m(i)(h),h.$digest(),h.$destroy()}]),a=i.outerWidth(!0),s=i.outerHeight(!0);const u=e+n.offset+a>Re.width()?e-n.offset-a:e+n.offset,f=r+n.offset+s>Re.height()?r-n.offset-s:r+n.offset;i.css("left",u>0?u:0),i.css("top",f>0?f:0)})}})();function Ge(t){const e='<input type="text" class="gf-form-input input-medium tight-form-input" spellcheck="false" style="display:none"></input>',r='<a class="gf-form-label tight-form-func dropdown-toggle" tabindex="1" gf-dropdown="menuItems" data-toggle="dropdown" ><i class="fa fa-plus"></i></a>';return{scope:{menuItems:"=dropdownTypeahead",dropdownTypeaheadOnSelect:"&dropdownTypeaheadOnSelect",model:"=ngModel"},link:(n,i,a)=>{const s=M()(e),u=M()(r);s.appendTo(i),u.appendTo(i),a.linkText&&u.html(a.linkText),a.ngModel&&n.$watch("model",C=>{(0,g.each)(n.menuItems,h=>{(0,g.each)(h.submenu,S=>{S.value===C&&u.html(S.text)})})});const f=(0,g.reduce)(n.menuItems,(C,h,S)=>(h.submenu?(0,g.each)(h.submenu,(T,G)=>{T.click="menuItemSelected("+S+","+G+")",C.push(h.text+" "+T.text)}):(h.click="menuItemSelected("+S+")",C.push(h.text)),C),[]),m=()=>{s.hide(),s.val(""),u.show(),u.focus(),i.removeClass("open")};n.menuItemSelected=(C,h)=>{const S=n.menuItems[C],T={$item:S};S.submenu&&h!==void 0&&(T.$subItem=S.submenu[h]),n.dropdownTypeaheadOnSelect(T),m()},s.attr("data-provide","typeahead"),s.typeahead({source:f,minLength:1,items:10,updater:C=>{const h={};return(0,g.each)(n.menuItems,S=>{(0,g.each)(S.submenu,T=>{C===S.text+" "+T.text&&(h.$subItem=T,h.$item=S)})}),h.$item&&n.$apply(()=>{n.dropdownTypeaheadOnSelect(h)}),s.trigger("blur"),""}}),u.click(()=>{u.hide(),s.show(),s.focus()}),s.keyup(()=>{i.toggleClass("open",s.val()==="")}),i.mousedown(C=>{C.preventDefault()}),s.blur(()=>{s.hide(),s.val(""),u.show(),u.focus(),setTimeout(()=>{i.removeClass("open")},200)}),t(i.contents())(n)}}}function Se(t){const e='<input type="text" class="gf-form-input" spellcheck="false" style="display:none"></input>',r='<a class="{{buttonTemplateClass}} dropdown-toggle" tabindex="1" gf-dropdown="menuItems" data-toggle="dropdown" ><i class="fa fa-plus"></i></a>';return{scope:{menuItems:"=dropdownTypeahead2",dropdownTypeaheadOnSelect:"&dropdownTypeaheadOnSelect",model:"=ngModel",buttonTemplateClass:"@"},link:(n,i,a)=>{const s=M()(e);n.buttonTemplateClass||(n.buttonTemplateClass="gf-form-input");const u=M()(r),f={blur:null};s.appendTo(i),u.appendTo(i),a.linkText&&u.html(a.linkText),a.ngModel&&n.$watch("model",h=>{(0,g.each)(n.menuItems,S=>{(0,g.each)(S.submenu,T=>{T.value===h&&u.html(T.text)})})});const m=(0,g.reduce)(n.menuItems,(h,S,T)=>(S.submenu?(0,g.each)(S.submenu,(G,pe)=>{G.click="menuItemSelected("+T+","+pe+")",h.push(S.text+" "+G.text)}):(S.click="menuItemSelected("+T+")",h.push(S.text)),h),[]),C=()=>{s.hide(),s.val(""),u.show(),u.focus(),i.removeClass("open")};n.menuItemSelected=(h,S)=>{const T=n.menuItems[h],G={$item:T};T.submenu&&S!==void 0&&(G.$subItem=T.submenu[S]),n.dropdownTypeaheadOnSelect(G),C()},s.attr("data-provide","typeahead"),s.typeahead({source:m,minLength:1,items:10,updater:h=>{const S={};return(0,g.each)(n.menuItems,T=>{(0,g.each)(T.submenu,G=>{h===T.text+" "+G.text&&(S.$subItem=G,S.$item=T)})}),S.$item&&n.$apply(()=>{n.dropdownTypeaheadOnSelect(S)}),s.trigger("blur"),""}}),u.click(()=>{u.hide(),s.show(),s.focus()}),s.keyup(()=>{i.toggleClass("open",s.val()==="")}),i.mousedown(h=>{h.preventDefault(),f.blur=null}),s.blur(()=>{f.blur=setTimeout(()=>{C()},1)}),t(i.contents())(n)}}}l.Ay.directive("dropdownTypeahead",["$compile",Ge]),l.Ay.directive("dropdownTypeahead2",["$compile",Se]);function _e(t){return{link:(e,r)=>{const n=r[0],i=()=>{const s=new Event("change");return n.dispatchEvent(s)},a=({animationName:s})=>{switch(s){case"onAutoFillStart":return i();case"onAutoFillCancel":return i()}return null};n.addEventListener("animationstart",a),e.$on("$destroy",()=>{n.removeEventListener("animationstart",a)})}}}l.Ay.directive("autofillEventFix",["$compile",_e]);function He(t,e,r){const n='<input type="text" data-provide="typeahead"  class="gf-form-input input-medium" spellcheck="false" style="display:none"></input>',i='<a class="gf-form-label" ng-class="segment.cssClass" tabindex="1" give-focus="segment.focus" ng-bind-html="segment.html"></a>',a='<a class="gf-form-input gf-form-input--dropdown" ng-class="segment.cssClass" tabindex="1" give-focus="segment.focus" ng-bind-html="segment.html"></a>';return{scope:{segment:"=",getOptions:"&",onChange:"&",debounce:"@"},link:(s,u)=>{const f=M()(n),m=s.segment,C=M()(m.selectMode?a:i);let h=null,S=null,T=!0;const G=s.debounce;f.appendTo(u),C.appendTo(u),s.updateVariableValue=w=>{w===""||m.value===w||s.$apply(()=>{const Y=(0,g.find)(s.altSegments,{value:w});Y?(m.value=Y.value,m.html=Y.html||e.trustAsHtml(r.highlightVariablesAsHtml(Y.value)),m.fake=!1,m.expandable=Y.expandable,Y.type&&(m.type=Y.type)):m.custom!=="false"&&(m.value=w,m.html=e.trustAsHtml(r.highlightVariablesAsHtml(w)),m.expandable=!0,m.fake=!1),s.onChange()})},s.switchToLink=w=>{T&&!w||(clearTimeout(S),S=null,T=!0,f.hide(),C.show(),s.updateVariableValue(f.val()))},s.inputBlur=()=>{S=setTimeout(s.switchToLink,200)},s.source=(w,Y)=>{s.$apply(()=>{s.getOptions({$query:w}).then(J=>{s.altSegments=J,h=(0,g.map)(s.altSegments,_=>(0,g.escape)(_.value)),m.custom!=="false"&&!m.fake&&(0,g.indexOf)(h,m.value)===-1&&h.unshift((0,g.escape)(m.value)),Y(h)})})},s.updater=w=>(w=(0,g.unescape)(w),w===m.value?(clearTimeout(S),f.focus(),w):(f.val(w),s.switchToLink(!0),w)),s.matcher=function(w){if(T)return!1;let Y=this.query;Y[0]==="/"&&(Y=Y.substring(1)),Y[Y.length-1]==="/"&&(Y=Y.substring(0,Y.length-1));try{return w.toLowerCase().match(Y.toLowerCase())}catch{return!1}},f.attr("data-provide","typeahead"),f.typeahead({source:s.source,minLength:0,items:1e4,updater:s.updater,matcher:s.matcher});const pe=f.data("typeahead");pe.lookup=function(){this.query=this.$element.val()||"";const w=this.source(this.query,M().proxy(this.process,this));return w&&this.process(w)},G&&(pe.lookup=(0,g.debounce)(pe.lookup,500,{leading:!0})),C.keydown(w=>{(w.keyCode===40||w.keyCode===13)&&C.click()}),C.click(()=>{h=null,f.css("width",Math.max(C.width(),80)+16+"px"),C.hide(),f.show(),f.focus(),T=!1;const w=f.data("typeahead");w&&(f.val(""),w.lookup())}),f.blur(s.inputBlur),t(u.contents())(s)}}}function Fe(t){return{template:'<metric-segment segment="segment" get-options="getOptionsInternal()" on-change="onSegmentChange()"></metric-segment>',restrict:"E",scope:{property:"=",options:"=",getOptions:"&",onChange:"&"},link:{pre:function(r,n,i){let a;r.valueToSegment=s=>{const u=(0,g.find)(r.options,{value:s}),f={cssClass:i.cssClass,custom:i.custom,value:u?u.text:s,selectMode:i.selectMode};return t.newSegment(f)},r.getOptionsInternal=()=>r.options?(a=r.options,Promise.resolve((0,g.map)(r.options,s=>({value:s.text})))):r.getOptions().then(s=>(a=s,(0,g.map)(s,u=>u.html?u:{value:u.text}))),r.onSegmentChange=()=>{if(a){const s=(0,g.find)(a,{text:r.segment.value});s&&s.value!==r.property?r.property=s.value:i.custom!=="false"&&(r.property=r.segment.value)}else r.property=r.segment.value;r.$$postDigest(()=>{r.$apply(()=>{r.onChange()})})},r.segment=r.valueToSegment(r.property)}}}}l.Ay.directive("metricSegment",["$compile","$sce","templateSrv",He]),l.Ay.directive("metricSegmentModel",["uiSegmentSrv",Fe]),l.Ay.directive("tip",["$compile",et]);function et(t){return{restrict:"E",link:(e,r,n)=>{let i='<i class="grafana-tip fa fa-'+(n.icon||"question-circle")+`" bs-tooltip="'`+r.text().replace(/[\'\"\\{}<>&]/g,a=>"&amp;#"+a.charCodeAt(0)+";")+`'"></i>`;r.replaceWith(t(y().element(i))(e))}}}l.Ay.directive("compile",["$compile",tt]);function tt(t){return{restrict:"A",link:(e,r,n)=>{e.$watch(i=>i.$eval(n.compile),i=>{r.html(i),t(r.contents())(e)})}}}l.Ay.directive("watchChange",nt);function nt(){return{scope:{onchange:"&watchChange"},link:(t,e)=>{e.on("input",()=>{t.$apply(()=>{t.onchange({inputValue:e.val()})})})}}}l.Ay.directive("editorOptBool",["$compile",Ht]);function Ht(t){return{restrict:"E",link:(e,r,n)=>{const i=n.change?' ng-change="'+n.change+'"':"",a=n.tip?" <tip>"+n.tip+"</tip>":"",u='<div class="editor-option gf-form-checkbox text-center"'+(n.showIf?' ng-show="'+n.showIf+'" ':"")+'> <label for="'+n.model+'" class="small">'+n.text+a+'</label><input class="cr1" id="'+n.model+'" type="checkbox"        ng-model="'+n.model+'"'+i+'       ng-checked="'+n.model+'"></input> <label for="'+n.model+'" class="cr1"></label>';r.replaceWith(t(y().element(u))(e))}}}l.Ay.directive("editorCheckbox",["$compile, $interpolate",Wt]);function Wt(t,e){return{restrict:"E",link:(r,n,i)=>{const a=e(i.text)(r),s=e(i.model)(r),u=i.change?' ng-change="'+i.change+'"':"",f=i.tip?" <tip>"+i.tip+"</tip>":"",m='<label for="'+r.$id+s+'" class="checkbox-label">'+a+f+"</label>";let C='<input class="cr1" id="'+r.$id+s+'" type="checkbox"        ng-model="'+s+'"'+u+'       ng-checked="'+s+'"></input> <label for="'+r.$id+s+'" class="cr1"></label>';C=C+m,n.addClass("gf-form-checkbox"),n.html(t(y().element(C))(r))}}}l.Ay.directive("gfDropdown",["$parse","$compile","$timeout",Qt]);function Qt(t,e,r){function n(i,a){const u=['<ul class="dropdown-menu '+(a==="top"?"dropup":"")+'" role="menu" aria-labelledby="drop1">',"</ul>"];for(let f=0;f<i.length;f++){const m=i[f];if(m.divider){u.splice(f+1,0,'<li class="divider"></li>');continue}let C="<li"+(m.submenu&&m.submenu.length?' class="dropdown-submenu"':"")+'><a tabindex="-1" ng-href="'+(m.href||"")+'"'+(m.click?' ng-click="'+m.click+'"':"")+(m.target?' target="'+m.target+'"':"")+(m.method?' data-method="'+m.method+'"':"")+">"+(m.text||"")+"</a>";m.submenu&&m.submenu.length&&(C+=n(m.submenu).join(`
`)),C+="</li>",u.splice(f+1,0,C)}return u}return{restrict:"EA",scope:!0,link:function(a,s,u){const f=t(u.gfDropdown),m=f(a);r(()=>{const C=s.data("placement");y().element(n(m,C).join("")).insertAfter(s),e(s.next("ul.dropdown-menu"))(a)}),s.addClass("dropdown-toggle").attr("data-toggle","dropdown")}}}l.Ay.directive("bsTooltip",["$parse","$compile",function(t,e){return{restrict:"A",scope:!0,link:function(n,i,a){let s=t(a.bsTooltip),u=s(n);n.$watch(a.bsTooltip,function(m,C){m!==C&&(u=m)}),i.on("show",function(m){M()(".tooltip.in").each(function(){const C=M()(this),h=C.data("tooltip");h&&!h.$element.is(i)&&C.tooltip("hide")})}),i.tooltip({title:function(){return y().isFunction(u)?u.apply(null,arguments):u},html:!0,container:"body"});const f=i.data("tooltip");f.show=function(){const m=M().fn.tooltip.Constructor.prototype.show.apply(this,arguments);return this.tip().data("tooltip",this),m},n._tooltip=function(m){i.tooltip(m)},n.hide=function(){i.tooltip("hide")},n.show=function(){i.tooltip("show")},n.dismiss=n.hide}}}]),l.Ay.directive("bsTypeahead",["$parse",function(t){return{restrict:"A",require:"?ngModel",link:function(r,n,i,a){let s=t(i.bsTypeahead),u=s(r);r.$watch(i.bsTypeahead,function(m,C){m!==C&&(u=m)}),n.attr("data-provide","typeahead"),n.typeahead({source:function(){return y().isFunction(u)?u.apply(null,arguments):u},minLength:i.minLength||1,items:i.item,updater:function(m){return a&&r.$apply(function(){a.$setViewValue(m)}),r.$emit("typeahead-updated",m),m}});const f=n.data("typeahead");f.lookup=function(){let m;return this.query=this.$element.val()||"",this.query.length<this.options.minLength?this.shown?this.hide():this:(m=(0,g.isFunction)(this.source)?this.source(this.query,M().proxy(this.process,this)):this.source,m?this.process(m):this)},i.matchAll&&(f.matcher=function(){return!0}),i.minLength==="0"&&setTimeout(function(){n.on("focus",function(){n.val().length===0&&setTimeout(n.typeahead.bind(n,"lookup"),200)})})}}}]);var Et=o(65879);function Yt(){return{restrict:"A",priority:1,require:"ngModel",link:(t,e,r,n)=>{r.type==="radio"||r.type==="checkbox"||(e.off("input keydown change"),e.bind("blur",()=>{t.$apply(()=>{n.$setViewValue(e.val())})}))}}}function Xt(){return{restrict:"A",require:"ngModel",link:(t,e,r,n)=>{n.$parsers.push(i=>i===""?null:i)}}}function Jt(){return{require:"ngModel",link:(t,e,r,n)=>{n.$validators.integer=(i,a)=>n.$isEmpty(i)||a.indexOf("$")===0||a.indexOf("+$")===0?!0:Et.describeTextRange(a).invalid!==!0}}}l.Ay.directive("ngModelOnblur",Yt),l.Ay.directive("emptyToNull",Xt),l.Ay.directive("validTimeSpan",Jt);var Zt=o(69613),ta=o(42346);function yt(t,e){const{color:r,borderColor:n}=(0,Zt.MC)(t);e.css("background-color",r),e.css("border-color",n)}function qt(){return{scope:{tagColorFromName:"="},link:(t,e)=>{yt(t.tagColorFromName,e)}}}function _t(){function t(e,r){if(r)return y().isFunction(e.$parent[r])?e.$parent[r]:n=>n[r]}return{restrict:"EA",scope:{model:"=ngModel",onTagsUpdated:"&"},template:"<select multiple></select>",replace:!1,link:function(e,r,n){y().isArray(e.model)||(e.model=[]);const i=M()("select",r);n.placeholder&&i.attr("placeholder",n.placeholder),i.tagsinput({typeahead:{source:y().isFunction(e.$parent[n.typeaheadSource])?e.$parent[n.typeaheadSource]:null},widthClass:n.widthClass,itemValue:t(e,n.itemvalue),itemText:t(e,n.itemtext),tagClass:y().isFunction(e.$parent[n.tagclass])?e.$parent[n.tagclass]:()=>n.tagclass}),i.on("itemAdded",a=>{e.model.indexOf(a.item)===-1&&(e.model.push(a.item),e.onTagsUpdated&&e.onTagsUpdated());const s=i.next().children("span").filter(()=>M()(this).text()===a.item);yt(a.item,s)}),i.on("itemRemoved",a=>{const s=e.model.indexOf(a.item);s!==-1&&(e.model.splice(s,1),e.onTagsUpdated&&e.onTagsUpdated())}),e.$watch("model",()=>{y().isArray(e.model)||(e.model=[]),i.tagsinput("removeAll");for(let a=0;a<e.model.length;a++)i.tagsinput("add",e.model[a])},!0)}}}l.Ay.directive("tagColorFromName",qt),l.Ay.directive("bootstrapTagsinput",_t);function en(t){let e=t[0];const r=t[t.length-1];let n;e=e.nextSibling;for(let i=1;e!==r&&e;i++)(n||t[i]!==e)&&(n||(n=M()([].slice.call(t,0,i))),n.push(e)),e=e.nextSibling;return n||t}l.Ay.directive("rebuildOnChange",["$animate",tn]);function tn(t){return{multiElement:!0,terminal:!0,transclude:!0,priority:600,restrict:"E",link:(e,r,n,i,a)=>{let s,u,f;function m(){f&&(f.remove(),f=null),u&&(u.$destroy(),u=null),s&&(f=en(s.clone),t.leave(f).then(()=>{f=null}),s=null)}e.$watch(n.property,function(h,S){u&&h!==S&&m(),!u&&(h||n.showNull)?a((T,G)=>{u=G,T[T.length++]=document.createComment(" end rebuild on change "),s={clone:T},t.enter(T,r.parent(),r)}):m()})}}}l.Ay.directive("giveFocus",()=>(t,e,r)=>{e.click(n=>{n.stopPropagation()}),t.$watch(r.giveFocus,n=>{n&&setTimeout(()=>{e.focus();const i=e[0];if(i.setSelectionRange){const a=e.val().length*2;i.setSelectionRange(a,a)}},200)},!0)});const na={};class nn{constructor(){const e=()=>{};this.observer=new MutationObserver(e);const r={attributes:!0,attributeFilter:["class"],characterData:!1,childList:!0,subtree:!1};this.observer.observe(y().element(".delta-html")[0],r)}$onDestroy(){this.observer.disconnect()}}function rn(){return{controller:nn,replace:!1,restrict:"A"}}l.Ay.directive("diffDelta",rn);class an{constructor(e,r,n){this.$scope=e,this.$rootScope=r,this.$anchorScroll=n}static{this.$inject=["$scope","$rootScope","$anchorScroll"]}goToLine(e){let r;const n=()=>{this.$anchorScroll(`l${e}`),r()};this.$scope.switchView().then(()=>{r=this.$rootScope.$on("json-diff-ready",n.bind(this))})}}function on(){return{controller:an,controllerAs:"ctrl",replace:!0,restrict:"E",scope:{line:"@lineDisplay",link:"@lineLink",switchView:"&"},template:'<a class="diff-linenum btn btn-inverse btn-small" ng-click="ctrl.goToLine(link)">Line {{ line }}</a>'}}l.Ay.directive("diffLinkJson",on);function sn(){"use strict";return{restrict:"A",require:"ngModel",link:(t,e,r,n)=>{function i(s){return(s||"").split(",")}function a(s){return(0,g.isArray)(s)?(s||"").join(","):s}n.$parsers.push(i),n.$formatters.push(a)}}}l.Ay.directive("arrayJoin",sn);var ln=o(94333),Xe=o(14578),cn=o(62930),un=o(83598),dn=o(70104),pn=o(2056),hn=o(33083),fn=o(64919),mn=o(91409),gn=o(10534),vn=o(32264),En=o(96378);function xe(t,e,r){l.Ay.directive(t,["reactDirective",n=>n((0,En.e)(e,vn.$.theme2),r)])}var yn=o(85242),bn=o(75590),Tn=o(32017),Cn=o.n(Tn),ct=o(50877),An=o(43127),bt=o(71087),Sn=o(96374);const Je={components:{queryEditor:{container:"data-testid cloud-monitoring-query-editor",header:{select:"data-testid cloud-monitoring-header"},visualMetricsQueryEditor:{container:{input:"data-testid cloud-monitoring-visual-metrics-query-editor"}},mqlMetricsQueryEditor:{container:{input:"data-testid cloud-monitoring-mql-query-editor"}},sloQueryEditor:{container:{input:"data-testid cloud-monitoring-slo-query-editor"}},promQlQueryEditor:{container:{input:"data-testid cloud-monitoring-prom-ql-query-editor"}}}}};var Ae=(t=>(t.ANNOTATION="annotation",t.PROMQL="promQL",t.SLO="slo",t.TIME_SERIES_LIST="timeSeriesList",t.TIME_SERIES_QUERY="timeSeriesQuery",t))(Ae||{});const ia={filters:[],groupBys:[],secondaryGroupBys:[]};var Ve=(t=>(t.Delta="delta",t.None="none",t.Rate="rate",t))(Ve||{});const aa={filters:[],groupBys:[]};var R=(t=>(t.CUMULATIVE="CUMULATIVE",t.DELTA="DELTA",t.GAUGE="GAUGE",t.METRIC_KIND_UNSPECIFIED="METRIC_KIND_UNSPECIFIED",t))(R||{}),E=(t=>(t.BOOL="BOOL",t.DISTRIBUTION="DISTRIBUTION",t.DOUBLE="DOUBLE",t.INT64="INT64",t.MONEY="MONEY",t.STRING="STRING",t.VALUE_TYPE_UNSPECIFIED="VALUE_TYPE_UNSPECIFIED",t))(E||{}),Ze=(t=>(t.ALIGN_COUNT="ALIGN_COUNT",t.ALIGN_COUNT_FALSE="ALIGN_COUNT_FALSE",t.ALIGN_COUNT_TRUE="ALIGN_COUNT_TRUE",t.ALIGN_DELTA="ALIGN_DELTA",t.ALIGN_FRACTION_TRUE="ALIGN_FRACTION_TRUE",t.ALIGN_INTERPOLATE="ALIGN_INTERPOLATE",t.ALIGN_MAX="ALIGN_MAX",t.ALIGN_MEAN="ALIGN_MEAN",t.ALIGN_MIN="ALIGN_MIN",t.ALIGN_NEXT_OLDER="ALIGN_NEXT_OLDER",t.ALIGN_NONE="ALIGN_NONE",t.ALIGN_PERCENTILE_05="ALIGN_PERCENTILE_05",t.ALIGN_PERCENTILE_50="ALIGN_PERCENTILE_50",t.ALIGN_PERCENTILE_95="ALIGN_PERCENTILE_95",t.ALIGN_PERCENTILE_99="ALIGN_PERCENTILE_99",t.ALIGN_PERCENT_CHANGE="ALIGN_PERCENT_CHANGE",t.ALIGN_RATE="ALIGN_RATE",t.ALIGN_STDDEV="ALIGN_STDDEV",t.ALIGN_SUM="ALIGN_SUM",t))(Ze||{});const oa={filters:[]};var xn=(t=>(t.Aggregations="aggregations",t.Aligners="aligners",t.AlignmentPeriods="alignmentPeriods",t.DefaultProject="defaultProject",t.LabelKeys="labelKeys",t.LabelValues="labelValues",t.MetricTypes="metricTypes",t.Projects="projects",t.ResourceTypes="resourceTypes",t.SLO="slo",t.SLOServices="sloServices",t.Selectors="selectors",t.Services="services",t))(xn||{}),In=o(46819),Ie=o(81580),Tt=o(10354);const ut=({refId:t,value:e="",onChange:r})=>{const[n,i]=(0,c.useState)(e??""),a=(0,g.debounce)(r,1e3),s=u=>{i(u.currentTarget.value),a(u.currentTarget.value)};return c.createElement(Ie.c,{label:"Alias by"},c.createElement(Tt.p,{id:`${t}-alias-by`,value:n,onChange:s}))};var We=o(9e4),Ct=o(66864),Ln=o(15292);const sa=71,la=19,ca=14,ua=28,At=[{text:"none",value:"ALIGN_NONE",valueTypes:[E.INT64,E.DOUBLE,E.MONEY,E.DISTRIBUTION,E.STRING,E.VALUE_TYPE_UNSPECIFIED,E.BOOL],metricKinds:[R.GAUGE]},{text:"delta",value:"ALIGN_DELTA",valueTypes:[E.INT64,E.DOUBLE,E.MONEY,E.DISTRIBUTION],metricKinds:[R.CUMULATIVE,R.DELTA]},{text:"rate",value:"ALIGN_RATE",valueTypes:[E.INT64,E.DOUBLE,E.MONEY],metricKinds:[R.CUMULATIVE,R.DELTA]},{text:"interpolate",value:"ALIGN_INTERPOLATE",valueTypes:[E.INT64,E.DOUBLE,E.MONEY],metricKinds:[R.GAUGE]},{text:"next older",value:"ALIGN_NEXT_OLDER",valueTypes:[E.INT64,E.DOUBLE,E.MONEY,E.DISTRIBUTION,E.STRING,E.VALUE_TYPE_UNSPECIFIED,E.BOOL],metricKinds:[R.GAUGE]},{text:"min",value:"ALIGN_MIN",valueTypes:[E.INT64,E.DOUBLE,E.MONEY],metricKinds:[R.GAUGE,R.DELTA]},{text:"max",value:"ALIGN_MAX",valueTypes:[E.INT64,E.DOUBLE,E.MONEY],metricKinds:[R.GAUGE,R.DELTA]},{text:"mean",value:"ALIGN_MEAN",valueTypes:[E.INT64,E.DOUBLE,E.MONEY],metricKinds:[R.GAUGE,R.DELTA]},{text:"count",value:"ALIGN_COUNT",valueTypes:[E.INT64,E.DOUBLE,E.MONEY,E.BOOL],metricKinds:[R.GAUGE,R.DELTA]},{text:"sum",value:"ALIGN_SUM",valueTypes:[E.INT64,E.DOUBLE,E.MONEY,E.DISTRIBUTION],metricKinds:[R.GAUGE,R.DELTA]},{text:"stddev",value:"ALIGN_STDDEV",valueTypes:[E.INT64,E.DOUBLE,E.MONEY],metricKinds:[R.GAUGE,R.DELTA]},{text:"count true",value:"ALIGN_COUNT_TRUE",valueTypes:[E.BOOL],metricKinds:[R.GAUGE]},{text:"count false",value:"ALIGN_COUNT_FALSE",valueTypes:[E.BOOL],metricKinds:[R.GAUGE]},{text:"fraction true",value:"ALIGN_FRACTION_TRUE",valueTypes:[E.BOOL],metricKinds:[R.GAUGE]},{text:"percentile 99",value:"ALIGN_PERCENTILE_99",valueTypes:[E.DISTRIBUTION],metricKinds:[R.GAUGE,R.DELTA]},{text:"percentile 95",value:"ALIGN_PERCENTILE_95",valueTypes:[E.DISTRIBUTION],metricKinds:[R.GAUGE,R.DELTA]},{text:"percentile 50",value:"ALIGN_PERCENTILE_50",valueTypes:[E.DISTRIBUTION],metricKinds:[R.GAUGE,R.DELTA]},{text:"percentile 05",value:"ALIGN_PERCENTILE_05",valueTypes:[E.DISTRIBUTION],metricKinds:[R.GAUGE,R.DELTA]},{text:"percent change",value:"ALIGN_PERCENT_CHANGE",valueTypes:[E.INT64,E.DOUBLE,E.MONEY],metricKinds:[R.GAUGE,R.DELTA]}],Nn=[{text:"none",value:"REDUCE_NONE",valueTypes:[E.INT64,E.DOUBLE,E.MONEY,E.DISTRIBUTION,E.BOOL,E.STRING],metricKinds:[R.GAUGE,R.DELTA,R.CUMULATIVE,R.METRIC_KIND_UNSPECIFIED]},{text:"mean",value:"REDUCE_MEAN",valueTypes:[E.INT64,E.DOUBLE,E.MONEY,E.DISTRIBUTION],metricKinds:[R.GAUGE,R.DELTA,R.CUMULATIVE]},{text:"min",value:"REDUCE_MIN",valueTypes:[E.INT64,E.DOUBLE,E.MONEY],metricKinds:[R.GAUGE,R.DELTA,R.CUMULATIVE,R.METRIC_KIND_UNSPECIFIED]},{text:"max",value:"REDUCE_MAX",valueTypes:[E.INT64,E.DOUBLE,E.MONEY],metricKinds:[R.GAUGE,R.DELTA,R.CUMULATIVE,R.METRIC_KIND_UNSPECIFIED]},{text:"sum",value:"REDUCE_SUM",valueTypes:[E.INT64,E.DOUBLE,E.MONEY,E.DISTRIBUTION],metricKinds:[R.GAUGE,R.DELTA,R.CUMULATIVE,R.METRIC_KIND_UNSPECIFIED]},{text:"std. dev.",value:"REDUCE_STDDEV",valueTypes:[E.INT64,E.DOUBLE,E.MONEY,E.DISTRIBUTION],metricKinds:[R.GAUGE,R.DELTA,R.CUMULATIVE,R.METRIC_KIND_UNSPECIFIED]},{text:"count",value:"REDUCE_COUNT",valueTypes:[E.INT64,E.DOUBLE,E.MONEY,E.DISTRIBUTION,E.BOOL,E.STRING],metricKinds:[R.GAUGE,R.DELTA,R.CUMULATIVE]},{text:"count true",value:"REDUCE_COUNT_TRUE",valueTypes:[E.BOOL],metricKinds:[R.GAUGE,R.DELTA]},{text:"count false",value:"REDUCE_COUNT_FALSE",valueTypes:[E.BOOL],metricKinds:[R.GAUGE,R.DELTA]},{text:"99th percentile",value:"REDUCE_PERCENTILE_99",valueTypes:[E.INT64,E.DOUBLE,E.MONEY,E.DISTRIBUTION],metricKinds:[R.GAUGE,R.DELTA,R.CUMULATIVE]},{text:"95th percentile",value:"REDUCE_PERCENTILE_95",valueTypes:[E.INT64,E.DOUBLE,E.MONEY,E.DISTRIBUTION],metricKinds:[R.GAUGE,R.DELTA,R.CUMULATIVE]},{text:"50th percentile",value:"REDUCE_PERCENTILE_50",valueTypes:[E.INT64,E.DOUBLE,E.MONEY,E.DISTRIBUTION],metricKinds:[R.GAUGE,R.DELTA,R.CUMULATIVE]},{text:"5th percentile",value:"REDUCE_PERCENTILE_05",valueTypes:[E.INT64,E.DOUBLE,E.MONEY,E.DISTRIBUTION],metricKinds:[R.GAUGE,R.DELTA,R.CUMULATIVE]}],St=[{text:"grafana auto",value:"grafana-auto"},{text:"stackdriver auto",value:"stackdriver-auto",hidden:!0},{text:"cloud monitoring auto",value:"cloud-monitoring-auto"},{text:"1m",value:"+60s"},{text:"2m",value:"+120s"},{text:"5m",value:"+300s"},{text:"10m",value:"+600s"},{text:"30m",value:"+1800s"},{text:"1h",value:"+3600s"},{text:"3h",value:"+7200s"},{text:"6h",value:"+21600s"},{text:"1d",value:"+86400s"},{text:"3d",value:"+259200s"},{text:"1w",value:"+604800s"}],Dn=[{text:"auto",value:"auto"},{text:"1m",value:"1m"},{text:"2m",value:"2m"},{text:"5m",value:"5m"},{text:"10m",value:"10m"},{text:"30m",value:"30m"},{text:"1h",value:"1h"},{text:"3h",value:"3h"},{text:"6h",value:"6h"},{text:"1d",value:"1d"},{text:"3d",value:"3d"},{text:"1w",value:"1w"}],wn=[{text:"1m",value:"1m"},{text:"2m",value:"2m"},{text:"5m",value:"5m"},{text:"10m",value:"10m"},{text:"30m",value:"30m"},{text:"1h",value:"1h"},{text:"3h",value:"3h"},{text:"6h",value:"6h"},{text:"24h",value:"24h"},{text:"72h",value:"72h"}],On=["metadata.system_labels.cloud_account","metadata.system_labels.name","metadata.system_labels.region","metadata.system_labels.state","metadata.system_labels.instance_group","metadata.system_labels.node_name","metadata.system_labels.service_name","metadata.system_labels.top_level_controller_type","metadata.system_labels.top_level_controller_name","metadata.system_labels.container_image"],xt="select_slo_burn_rate",It=[{label:"SLI Value",value:"select_slo_health"},{label:"SLO Compliance",value:"select_slo_compliance"},{label:"SLO Error Budget Remaining",value:"select_slo_budget_fraction"},{label:"SLO Burn Rate",value:xt}],Mn=[{label:"Builder",value:Ae.TIME_SERIES_LIST},{label:"MQL",value:Ae.TIME_SERIES_QUERY},{label:"Service Level Objectives (SLO)",value:Ae.SLO},{label:"PromQL",value:Ae.PROMQL}];var we=o(21594);function rt({refId:t,projectName:e,datasource:r,onChange:n,templateVariableOptions:i}){const[a,s]=(0,c.useState)([]);(0,c.useEffect)(()=>{r.getProjects().then(f=>s(f))},[r]);const u=(0,c.useMemo)(()=>[{label:"Template Variables",options:i},...a],[a,i]);return c.createElement(Ie.c,{label:"Project"},c.createElement(we.l6,{width:"auto",allowCustomValue:!0,formatCreateLabel:f=>`Use project: ${f}`,onChange:({value:f})=>n(f),options:u,value:{value:e,label:e},placeholder:"Select Project",inputId:`${t}-project`}))}var it=o(97801),Lt=o(72574);const da=t=>uniqBy(t,"service"),Pn=(t,e)=>t.filter(r=>r.service===e),pa=(t,e,r,n)=>{const i=Pn(t,n).map(f=>({value:f.type,name:f.displayName})),a=i.some(f=>f.value===r),s=i.length?i[0].value:"";return{metricTypes:i,selectedMetricType:a?e:s}},Rn=(t,e,r)=>(r&&r===Ve.Rate&&(e=R.GAUGE),t?At.filter(n=>n.valueTypes.indexOf(t)!==-1&&n.metricKinds.indexOf(e)!==-1):[]),Un=(t,e)=>e?Nn.filter(r=>r.valueTypes.indexOf(t)!==-1&&r.metricKinds.indexOf(e)!==-1):[],ha=async(t,e,r)=>{const i=await t.getLabels(e,"handleLabelKeysQuery",r);return[...Object.keys(i),...SYSTEM_LABELS]},dt=(t=E.DOUBLE,e=R.GAUGE,r=Ze.ALIGN_MEAN,n)=>{const i=(0,Lt.w)(),a=Rn(t,e,n).map(s=>({...s,label:s.text}));return a.some(s=>s.value===i.replace(r))||(r=a.length>0?a[0].value:Ze.ALIGN_MEAN),{alignOptions:a,perSeriesAligner:r}},Nt=t=>{const e=t.reduce((r,n)=>{const i=n.split(".").map(g.startCase),a=(i.length===2?i:(0,g.initial)(i)).join(" "),s={value:n,label:n};return r[a]?r[a]=[...r[a],s]:r[a]=[s],r},{});return Object.entries(e).map(([r,n])=>({label:r,options:n,expanded:!0}),[])},$n=t=>(0,g.chunk)(t,4).map(([e,r,n,i="AND"])=>({key:e,operator:r,value:n,condition:i})),Dt=(t,e)=>{const{perSeriesAligner:r,alignmentPeriod:n}=t;if(!n||!r)return"";const i=At.find(u=>u.value===e.templateSrv.replace(r)),a=parseInt(n,10);return`${Et.secondsToHms(a)} interval (${i?.text??""})`},kn=t=>{const e=t?.filters?.findIndex(n=>n==="metric.type");return t?.filters?.[e+2]||""},Bn=(t,e)=>{if(!t.filters)return t.filters=["metric.type","=",e],t;const r=t?.filters?.findIndex(n=>n==="metric.type");return r===-1?t.filters.push("metric.type","=",e):t.filters[r+2]=e,t},Gn=t=>{const e=Fn(t),r=Vn(e,t);return c.createElement(Ie.c,{label:"Group by function","data-testid":"cloud-monitoring-aggregation"},c.createElement(we.l6,{width:"auto",onChange:({value:n})=>t.onChange(n),value:r,options:[{label:"Template Variables",options:t.templateVariableOptions},{label:"Aggregations",expanded:!0,options:e}],placeholder:"Select Reducer",inputId:`${t.refId}-group-by-function`,menuPlacement:"top"}))},Fn=({metricDescriptor:t})=>{const e=t?.valueType,r=t?.metricKind;return(0,c.useMemo)(()=>!e||!r?[]:Un(e,r).map(n=>({...n,label:n.text})),[e,r])},Vn=(t,e)=>(0,c.useMemo)(()=>[...t,...e.templateVariableOptions].find(n=>n.value===e.crossSeriesReducer),[t,e.crossSeriesReducer,e.templateVariableOptions]),jn=({refId:t,labels:e=[],query:r,onChange:n,variableOptionGroup:i,metricDescriptor:a})=>{const s=(0,c.useMemo)(()=>[i,...Nt([...e,...On])],[e,i]);return c.createElement(it.B,null,c.createElement(Ie.c,{label:"Group by",tooltip:"You can reduce the amount of data returned for a metric by combining different time series. To combine multiple time series, you can specify a grouping and a function. Grouping is done on the basis of labels. The grouping function is used to combine the time series in the group into a single time series."},c.createElement(we.KF,{allowCustomValue:!0,inputId:`${t}-group-by`,width:"auto",placeholder:"Choose label",options:s,value:r.groupBys??[],onChange:u=>{n({...r,groupBys:u.map(f=>f.value)})},menuPlacement:"top"})),c.createElement(Gn,{metricDescriptor:a,templateVariableOptions:i.options,crossSeriesReducer:r.crossSeriesReducer,groupBys:r.groupBys??[],onChange:u=>n({...r,crossSeriesReducer:u}),refId:t}))},zn=({inputId:t,query:e,templateVariableOptions:r,onChange:n,metricDescriptor:i,preprocessor:a})=>{const{perSeriesAligner:s}=e;let{valueType:u,metricKind:f}=i||{};const{perSeriesAligner:m,alignOptions:C}=(0,c.useMemo)(()=>dt(u,f,s,a),[u,f,s,a]);return c.createElement(we.l6,{onChange:({value:h})=>n({...e,perSeriesAligner:h}),value:[...C,...r].find(h=>h.value===m),options:[{label:"Template Variables",options:r},{label:"Alignment options",expanded:!0,options:C}],placeholder:"Select Alignment",inputId:t,menuPlacement:"top"})};function pt({inputId:t,templateVariableOptions:e,onChange:r,current:n,disabled:i,aligmentPeriods:a}){const s=(0,c.useMemo)(()=>a.map(f=>({...f,label:f.text})),[a]),u=(0,c.useMemo)(()=>s.filter(f=>!f.hidden),[s]);return c.createElement(we.l6,{width:"auto",onChange:({value:f})=>r(f),value:[...s,...e].find(f=>f.value===n),options:[{label:"Template Variables",options:e},{label:"Aggregations",expanded:!0,options:u}],placeholder:"Select Period",inputId:t,disabled:i,allowCustomValue:!0,menuPlacement:"top"})}const Kn=({refId:t,templateVariableOptions:e,onChange:r,query:n,customMetaData:i,datasource:a,metricDescriptor:s,preprocessor:u})=>{const f=(0,c.useMemo)(()=>Dt(i,a),[i,a]);return c.createElement(it.B,null,c.createElement(Ie.c,{label:"Alignment function",tooltip:"The process of alignment consists of collecting all data points received in a fixed length of time, applying a function to combine those data points, and assigning a timestamp to the result."},c.createElement(zn,{inputId:`${t}-alignment-function`,templateVariableOptions:e,query:n,onChange:m=>r({...n,...m}),metricDescriptor:s,preprocessor:u})),c.createElement(Ie.c,{label:"Alignment period",tooltip:f},c.createElement(pt,{inputId:`${t}-alignment-period`,templateVariableOptions:e,current:n.alignmentPeriod,onChange:m=>r({...n,alignmentPeriod:m}),aligmentPeriods:St})))};var Hn=o(3721),Wn=o(85269);const ht="=",wt="AND",Qn=t=>t.flatMap(({key:e,operator:r,value:n,condition:i})=>[e,r,n,i]).slice(0,-1),Yn=["=","!=","=~","!=~"].map(ct.z),Ot=["metric.type"],Xn=({labels:t={},filters:e,onChange:r,variableOptionGroup:n})=>{const i=$n(e),a=i.filter(({key:h})=>!Ot.includes(h)),s=i.filter(({key:h})=>Ot.includes(h)),u=(0,c.useMemo)(()=>[n,...Nt(Object.keys(t))],[t,n]),f=({key:h="",value:S=""})=>{u.some(w=>w.options?u.some(Y=>Y.label===h):w.label===h)||u.push({label:h,value:h});const G=t.hasOwnProperty(h)?[n,...t[h].map(ct.z)]:[n];return G.some(w=>w.label===S)||G.push({label:S,value:S}),{options:u,valueOptions:G}},m=h=>{const S=h.concat(s).map(({key:T,operator:G,value:pe,condition:w})=>({key:T||"",operator:G||ht,value:pe||"",condition:w||wt}));r(Qn(S))},C=(h,S,T)=>{const{key:G="",operator:pe=ht,value:w="",condition:Y=wt}=h,{options:J,valueOptions:_}=f(h);return c.createElement(Ct.Gy,{spacing:"xs",width:"auto"},c.createElement(we.l6,{"aria-label":"Filter label key",formatCreateLabel:ce=>`Use label key: ${ce}`,allowCustomValue:!0,value:G,options:J,onChange:({value:ce=""})=>S({key:ce,operator:pe,value:w,condition:Y})}),c.createElement(we.l6,{value:pe,options:Yn,onChange:({value:ce=ht})=>S({key:G,operator:ce,value:w,condition:Y})}),c.createElement(we.l6,{"aria-label":"Filter label value",placeholder:"add filter value",formatCreateLabel:ce=>`Use label value: ${ce}`,allowCustomValue:!0,value:w,options:_,onChange:({value:ce=""})=>S({key:G,operator:pe,value:ce,condition:Y})}),c.createElement(Hn.Z,{"aria-label":"Remove",icon:"times",variant:"secondary",onClick:T,type:"button"}))};return c.createElement(We.U,null,c.createElement(Ie.c,{label:"Filter",tooltip:"To reduce the amount of data charted, apply a filter. A filter has three components: a label, a comparison, and a value. The comparison can be an equality, inequality, or regular expression."},c.createElement(Wn.o,{items:a,renderItem:C,onChange:m})))},fa=()=>React.createElement("div",{className:"grafana-info-box alert-info"},React.createElement("div",null,React.createElement("h5",null,"Annotation Query Format"),React.createElement("p",null,"An annotation is an event that is overlaid on top of graphs. Annotation rendering is expensive so it is important to limit the number of rows returned."," "),React.createElement("p",null,"The Title and Text fields support templating and can use data returned from the query. For example, the Title field could have the following text:"),React.createElement("code",null,"{{metric.type}}"," has value: ","{{metric.value}}"),React.createElement("p",null,"Example Result: ",React.createElement("code",null,"monitoring.googleapis.com/uptime_check/http_status has this value: 502")),React.createElement("span",null,"Patterns:"),React.createElement("p",null,React.createElement("code",null,"{{metric.value}}")," = value of the metric/point"),React.createElement("p",null,React.createElement("code",null,"{{metric.type}}")," = metric type e.g. compute.googleapis.com/instance/cpu/usage_time"),React.createElement("p",null,React.createElement("code",null,"{{metric.name}}")," = name part of metric e.g. instance/cpu/usage_time"),React.createElement("p",null,React.createElement("code",null,"{{metric.service}}")," = service part of metric e.g. compute"),React.createElement("p",null,React.createElement("code",null,"{{metric.label.label_name}}")," = Metric label metadata e.g. metric.label.instance_name"),React.createElement("p",null,React.createElement("code",null,"{{resource.label.label_name}}")," = Resource label metadata e.g. resource.label.zone"))),Jn=({refId:t,current:e,templateVariableOptions:r,onChange:n})=>{const i=wn.map(s=>({...s,label:s.text}));e&&!i.find(s=>s.value===e)&&i.push({label:e,text:e,value:e,hidden:!1});const a=i.filter(s=>!s.hidden);return c.createElement(Ie.c,{label:"Lookback period",htmlFor:`${t}-lookback-period`},c.createElement(we.l6,{inputId:`${t}-lookback-period`,width:"auto",allowCustomValue:!0,value:[...i,...r].find(s=>s.value===e),options:[{label:"Template Variables",options:r},{label:"Predefined periods",expanded:!0,options:a}],onChange:({value:s})=>n(s)}))},Zn=({refId:t,query:e,templateVariableOptions:r,onChange:n,datasource:i})=>{const[a,s]=(0,c.useState)([]),{projectName:u,serviceId:f}=e;return(0,c.useEffect)(()=>{!u||!f||i.getServiceLevelObjectives(u,f).then(m=>{s([{label:"Template Variables",options:r},...m])})},[i,u,f,r]),c.createElement(Ie.c,{label:"SLO"},c.createElement(we.l6,{inputId:`${t}-slo`,width:"auto",allowCustomValue:!0,value:e?.sloId&&{value:e?.sloId,label:e?.sloName||e?.sloId},placeholder:"Select SLO",options:a,onChange:async({value:m="",label:C=""})=>{const S=(await i.getServiceLevelObjectives(u,f)).find(({value:T})=>T===i.templateSrv.replace(m));n({...e,sloId:m,sloName:C,goal:S?.goal})}}))},qn=({refId:t,query:e,templateVariableOptions:r,onChange:n,datasource:i})=>c.createElement(Ie.c,{label:"Selector",htmlFor:`${t}-slo-selector`},c.createElement(we.l6,{inputId:`${t}-slo-selector`,width:"auto",allowCustomValue:!0,value:[...It,...r].find(a=>a.value===e?.selectorName),options:[{label:"Template Variables",options:r},...It],onChange:({value:a})=>n({...e,selectorName:a??""})})),_n=({refId:t,query:e,templateVariableOptions:r,onChange:n,datasource:i})=>{const[a,s]=(0,c.useState)([]),{projectName:u}=e;return(0,c.useEffect)(()=>{u&&i.getSLOServices(u).then(f=>{s([{label:"Template Variables",options:r},...f])})},[i,u,r]),c.createElement(Ie.c,{label:"Service"},c.createElement(we.l6,{inputId:`${t}-slo-service`,width:"auto",allowCustomValue:!0,value:e?.serviceId&&{value:e?.serviceId,label:e?.serviceName||e?.serviceId},placeholder:"Select service",options:a,onChange:({value:f="",label:m=""})=>n({...e,serviceId:f,serviceName:m,sloId:""})}))},er=t=>({projectName:t.getDefaultProject(),alignmentPeriod:"cloud-monitoring-auto",perSeriesAligner:Ze.ALIGN_MEAN,aliasBy:"",selectorName:"select_slo_health",serviceId:"",serviceName:"",sloId:"",sloName:"",lookbackPeriod:""});function tr({refId:t,query:e,datasource:r,onChange:n,variableOptionGroup:i,customMetaData:a,aliasBy:s,onChangeAliasBy:u}){const f=(0,c.useMemo)(()=>Dt(a,r),[a,r]);return c.createElement("span",{"data-testid":Je.components.queryEditor.sloQueryEditor.container.input},c.createElement(We.U,null,c.createElement(rt,{refId:t,templateVariableOptions:i.options,projectName:e.projectName,datasource:r,onChange:m=>n({...e,projectName:m})}),c.createElement(_n,{refId:t,datasource:r,templateVariableOptions:i.options,query:e,onChange:n}),c.createElement(Zn,{refId:t,datasource:r,templateVariableOptions:i.options,query:e,onChange:n}),c.createElement(qn,{refId:t,datasource:r,templateVariableOptions:i.options,query:e,onChange:n}),e.selectorName===xt&&c.createElement(Jn,{refId:t,onChange:m=>n({...e,lookbackPeriod:m}),current:e.lookbackPeriod,templateVariableOptions:i.options}),c.createElement(it.B,null,c.createElement(Ie.c,{label:"Alignment period",tooltip:f},c.createElement(pt,{inputId:`${t}-alignment-period`,templateVariableOptions:i.options,current:e.alignmentPeriod,onChange:m=>n({...e,alignmentPeriod:m}),aligmentPeriods:St}))),c.createElement(ut,{refId:t,value:s,onChange:u})))}var Mt=o(21744);function nr({query:t,onChange:e,onRunQuery:r}){const n=i=>{i.key==="Enter"&&(i.shiftKey||i.ctrlKey)&&(i.preventDefault(),r())};return c.createElement("span",{"data-testid":Je.components.queryEditor.mqlMetricsQueryEditor.container.input},c.createElement(Mt.f,{name:"Query",className:"slate-query-field",value:t,rows:10,placeholder:"Enter a Cloud Monitoring MQL query (Run with Shift+Enter)",onBlur:r,onChange:i=>e(i.currentTarget.value),onKeyDown:n}))}const ma=({label:t,onChange:e,value:r,options:n,allowCustomValue:i=!1})=>React.createElement(Field,{label:t},React.createElement(Select,{width:25,allowCustomValue:i,value:r,onChange:({value:a})=>e(a),options:n}));var Be=o(32196),rr=o(76459),ir=o.n(rr),ar=o(14110),at=o(40845),or=o(88824),sr=o(94354);const Pt={label:"None",value:Ve.None},lr=({query:t,metricDescriptor:e,onChange:r})=>{const n=cr(e);return c.createElement(Ie.c,{label:"Pre-processing",tooltip:"Preprocessing options are displayed when the selected metric has a metric kind of delta or cumulative. The specific options available are determined by the metric's value type. If you select 'Rate', data points are aligned and converted to a rate per time series. If you select 'Delta', data points are aligned by their delta (difference) per time series"},c.createElement(sr.z,{onChange:i=>{const{perSeriesAligner:a}=t,{valueType:s,metricKind:u}=e??{},{perSeriesAligner:f}=dt(s,u,a,i);r({...t,preprocessor:i,perSeriesAligner:f})},value:t.preprocessor??Ve.None,options:n}))},cr=t=>{const e=t?.metricKind,r=t?.valueType;return(0,c.useMemo)(()=>{if(!e||e===R.GAUGE||r===E.DISTRIBUTION)return[Pt];const n=[Pt,{label:"Rate",value:Ve.Rate,description:"Data points are aligned and converted to a rate per time series"}];return e===R.CUMULATIVE?[...n,{label:"Delta",value:Ve.Delta,description:"Data points are aligned by their delta (difference) per time series"}]:n},[e,r])};function ur({refId:t,onChange:e,datasource:r,query:n,variableOptionGroup:i,customMetaData:a,aliasBy:s,onChangeAliasBy:u,range:f}){const[m,C]=(0,c.useState)({}),[h,S]=(0,c.useState)([]),[T,G]=(0,c.useState)(),[pe,w]=(0,c.useState)([]),[Y,J]=(0,c.useState)([]),[_,ce]=(0,c.useState)(""),[Ee,fe]=(0,c.useState)({...f});(ve=>{Ee!==null&&(Ee.raw.from.toString()!==ve.raw.from.toString()||Ee.raw.to.toString()!==ve.raw.to.toString())&&fe({...ve})})(f);const ze=(0,at.$j)(),Oe=(0,or.J)(ze),$e=(0,at.of)(dr),{projectName:ke,groupBys:jt,crossSeriesReducer:zt}=n,je=kn(n),{templateSrv:ot}=r,st=(0,c.useCallback)((ve,Ce)=>ve.find(be=>be.type===ot.replace(Ce)),[ot]);(0,c.useEffect)(()=>{ke&&je&&r.getLabels(je,t,ke,{groupBys:jt,crossSeriesReducer:zt},Ee).then(ve=>C(ve))},[r,jt,je,ke,t,zt,Ee]),(0,c.useEffect)(()=>{(async()=>{if(ke){const Ce=await r.getMetricTypes(ke);(0,ar.rR)("cloud-monitoring-metric-descriptors-loaded",{count:Ce.length});const be=qi(Ce);S(Ce),J(be)}})()},[r,ke,$e,Oe.optionDescription]),(0,c.useEffect)(()=>{const Ce=(Ye=>{const lt=st(Ye,je);return lt?Ye.filter(Ke=>Ke.service===lt.service).map(Ke=>({service:Ke.service,value:Ke.type,label:Ke.displayName,component:function(){return c.createElement("div",null,c.createElement("div",{className:$e},Ke.type),c.createElement("div",{className:Oe.optionDescription},Ke.description))}})):[]})(h),be=Ce.length>0?Ce[0].service:"",Pe=st(h,je);G(Pe),w(Ce),ce(be)},[h,st,je,$e,Oe.optionDescription]);const Zi=({value:ve})=>{const Ce=h.filter(be=>be.service===ot.replace(ve)).map(be=>({service:be.service,value:be.type,label:be.displayName,description:be.description}));n.filters=[],Ce.length>0&&!Ce.some(be=>be.value===ot.replace(je))?(Kt(Ce[0]),ce(ve),w(Ce)):(ce(ve),w(Ce))},qi=ve=>{const Ce=ve.map(be=>({value:be.service,label:(0,g.startCase)(be.serviceShortName)}));return Ce.length>0?(0,g.uniqBy)(Ce,be=>be.value):[]},_i=async ve=>{const be=(await r.filterMetricsByType(ke,_)).filter(Pe=>Pe.type.includes(ve.toLowerCase())).map(Pe=>({value:Pe.type,label:Pe.displayName,component:function(){return c.createElement("div",null,c.createElement("div",{className:$e},Pe.type),c.createElement("div",{className:Oe.optionDescription},Pe.description))}}));return[{label:"Template Variables",options:i.options},...be]},ea=ir()(_i,400),Kt=({value:ve})=>{const Ce=st(h,ve);G(Ce);const{metricKind:be,valueType:Pe}=Ce,Ye=be===R.GAUGE||Pe===E.DISTRIBUTION?Ve.None:Ve.Rate,{perSeriesAligner:lt}=dt(Pe,be,n.perSeriesAligner,Ye);Object.assign(n,{...ft(r),projectName:n.projectName,filters:n.filters}),e({...Bn({...n,perSeriesAligner:lt},ve),preprocessor:Ye})};return c.createElement("span",{"data-testid":Je.components.queryEditor.visualMetricsQueryEditor.container.input},c.createElement(We.U,null,c.createElement(it.B,null,c.createElement(rt,{refId:t,templateVariableOptions:i.options,projectName:ke,datasource:r,onChange:ve=>{e({...n,projectName:ve})}}),c.createElement(Ie.c,{label:"Service",width:"auto"},c.createElement(we.l6,{width:"auto",onChange:Zi,isLoading:Y.length===0,value:[...Y,...i.options].find(ve=>ve.value===_),options:[{label:"Template Variables",options:i.options},...Y],placeholder:"Select Services",inputId:`${t}-service`})),c.createElement(Ie.c,{label:"Metric name",width:"auto",htmlFor:`${t}-select-metric`},c.createElement("span",{title:_===""?"Select a service first":"Type to search metrics"},c.createElement(we.DW,{width:"auto",onChange:Kt,value:[...pe,...i.options].find(ve=>ve.value===je),loadOptions:ea,defaultOptions:[{label:"Template Variables",options:i.options},...pe.slice(0,100)],placeholder:"Select Metric",inputId:`${t}-select-metric`,disabled:_===""}))))),c.createElement(c.Fragment,null,c.createElement(Xn,{labels:m,filters:n.filters,onChange:ve=>e({...n,filters:ve}),variableOptionGroup:i}),c.createElement(We.U,null,c.createElement(lr,{metricDescriptor:T,query:n,onChange:e}),c.createElement(jn,{refId:t,labels:Object.keys(m),query:n,onChange:e,variableOptionGroup:i,metricDescriptor:T}),c.createElement(Kn,{refId:t,datasource:r,templateVariableOptions:i.options,query:n,customMetaData:a,onChange:e,metricDescriptor:T,preprocessor:n.preprocessor}),c.createElement(ut,{refId:t,value:s,onChange:u}))))}const dr=t=>(0,Be.css)`
  label: grafana-select-option-description;
  font-weight: normal;
  font-style: italic;
  color: ${t.colors.text.secondary};
`,pr=c.memo(ur),hr=({refId:t,onChange:e,graphPeriod:r,variableOptionGroup:n})=>c.createElement(We.U,null,c.createElement(Ie.c,{label:"Graph period",htmlFor:`${t}-graph-period`,tooltip:c.createElement(c.Fragment,null,"Set ",c.createElement("code",null,"graph_period")," which forces a preferred period between points. Automatically set to the current interval if left blank.")},c.createElement(Ct.Gy,null,c.createElement(Ln.d,{"data-testid":`${t}-switch-graph-period`,value:r!=="disabled",onChange:i=>e(i.currentTarget.checked?"":"disabled")}),c.createElement(pt,{inputId:`${t}-graph-period`,templateVariableOptions:n.options,current:r,onChange:e,disabled:r==="disabled",aligmentPeriods:Dn})))),ft=t=>({projectName:t.getDefaultProject(),crossSeriesReducer:"REDUCE_NONE",alignmentPeriod:"cloud-monitoring-auto",perSeriesAligner:Ze.ALIGN_MEAN,groupBys:[],filters:[]}),Rt=t=>({projectName:t.getDefaultProject(),query:""});function fr({refId:t,query:e,datasource:r,onChange:n,onRunQuery:i,customMetaData:a,variableOptionGroup:s,range:u}){const f=(0,c.useCallback)(C=>{let h=!0;if(C?.filters&&C.filters.length>0){for(const S of C.filters)if(S===""){h=!1;break}}n({...e,timeSeriesList:C}),h&&i()},[n,i,e]),m=(0,c.useCallback)(C=>{n({...e,timeSeriesQuery:C}),i()},[n,i,e]);return(0,c.useEffect)(()=>{e.queryType===Ae.TIME_SERIES_LIST&&!e.timeSeriesList&&n({refId:e.refId,datasource:e.datasource,queryType:Ae.TIME_SERIES_LIST,timeSeriesList:ft(r),aliasBy:e.aliasBy}),e.queryType===Ae.TIME_SERIES_QUERY&&!e.timeSeriesQuery&&n({refId:e.refId,datasource:e.datasource,queryType:Ae.TIME_SERIES_QUERY,timeSeriesQuery:Rt(r),aliasBy:e.aliasBy})},[n,e,r]),c.createElement(bt.D,null,(e.queryType===Ae.ANNOTATION||e.queryType===Ae.TIME_SERIES_LIST)&&e.timeSeriesList&&c.createElement(pr,{refId:t,variableOptionGroup:s,customMetaData:a,onChange:f,datasource:r,query:e.timeSeriesList,aliasBy:e.aliasBy,onChangeAliasBy:C=>n({...e,aliasBy:C}),range:u}),e.queryType===Ae.TIME_SERIES_QUERY&&e.timeSeriesQuery&&c.createElement(c.Fragment,null,c.createElement(In.B,{gap:1,direction:"row"},c.createElement(rt,{refId:t,datasource:r,onChange:C=>m({...e.timeSeriesQuery,projectName:C}),templateVariableOptions:s.options,projectName:e.timeSeriesQuery.projectName}),c.createElement(ut,{refId:t,value:e.aliasBy,onChange:C=>n({...e,aliasBy:C})})),c.createElement(nr,{onChange:C=>m({...e.timeSeriesQuery,query:C}),onRunQuery:i,query:e.timeSeriesQuery.query}),c.createElement(hr,{onChange:C=>m({...e.timeSeriesQuery,graphPeriod:C}),graphPeriod:e.timeSeriesQuery.graphPeriod,refId:t,variableOptionGroup:s})))}const mr=c.memo(fr),ga=t=>({projectName:t.getDefaultProject(),expr:"",step:"10s"});function gr({refId:t,query:e,datasource:r,onChange:n,variableOptionGroup:i,onRunQuery:a}){function s(u){u.key==="Enter"&&u.shiftKey&&(a(),u.preventDefault(),u.stopPropagation())}return c.createElement("span",{"data-testid":Je.components.queryEditor.promQlQueryEditor.container.input},c.createElement(We.U,null,c.createElement(rt,{refId:t,templateVariableOptions:i.options,projectName:e.projectName,datasource:r,onChange:u=>n({...e,projectName:u})}),c.createElement(Mt.f,{name:"Query",className:"slate-query-field",value:e.expr,rows:10,placeholder:"Enter a Cloud Monitoring Prometheus query (Run with Shift+Enter)",onBlur:a,onKeyDown:s,onChange:u=>n({...e,expr:u.currentTarget.value})}),c.createElement(Ie.c,{label:"Min step",tooltip:"Time units and built-in variables can be used here, for example: $__interval, $__rate_interval, 5s, 1m, 3h, 1d, 1y (Default if no unit is specified: 10s)"},c.createElement(Tt.p,{type:"string",placeholder:"auto",onChange:u=>n({...e,step:u.currentTarget.value}),onKeyDown:s,value:e.step??""}))))}var vr=o(6191),Er=o(22354),yr=o(31347);const br=t=>{const{query:e,onChange:r,onRunQuery:n}=t,{queryType:i}=e;return c.createElement(vr.X,null,c.createElement(Er.W,{label:"Query type",options:Mn,value:i,onChange:({value:a})=>{r({...e,queryType:a}),n()}}),c.createElement(yr.Z,{grow:1}))},Tr=t=>{const{datasource:e,query:r,onRunQuery:n,onChange:i,range:a}=t,[s,u]=(0,c.useState)(!1);(0,c.useEffect)(()=>{const fe=e.migrateQuery(r);Cn()(fe,r)||i({...fe})},[r,e,i]);const[f,m]=(0,c.useState)(r),[C,h]=(0,c.useState)(!1),S={...er(e),...r.sloQuery},T=fe=>{i({...r,sloQuery:fe}),n()},G={projectName:e.getDefaultProject(),expr:"",step:"10s",...r.promQLQuery},pe=fe=>{i({...r,promQLQuery:fe})},w=fe=>{(fe.queryType===Ae.TIME_SERIES_LIST&&!(0,g.isEqual)(fe.timeSeriesList,ft(e))||fe.queryType===Ae.TIME_SERIES_QUERY&&!(0,g.isEqual)(fe.timeSeriesQuery,Rt(e)))&&h(!0),i(fe)},J=(t.data?.series.length?t.data?.series[0].meta:{})?.custom??{},_={label:"Template Variables",expanded:!1,options:e.getVariables().map(ct.z)};(0,c.useEffect)(()=>{(!r.queryType||!Object.values(Ae).includes(r.queryType))&&i({...r,queryType:Ae.TIME_SERIES_LIST})});const ce=r.queryType,Ee=fe=>{C&&(f.queryType===Ae.TIME_SERIES_LIST||f.queryType===Ae.TIME_SERIES_QUERY)?f.queryType!==fe.queryType&&u(!0):i(fe),m(fe)};return c.createElement("span",{"data-testid":Je.components.queryEditor.container},c.createElement(bt.D,null,c.createElement(Sn.u,{"data-testid":"switch-query-type-modal",title:"Warning",body:"By switching your query type, your current query will be lost.",isOpen:s,onConfirm:()=>{u(!1),i(f),h(!1)},confirmText:"Confirm",onDismiss:()=>{u(!1),m(r)}}),c.createElement(br,{query:r,onChange:Ee,onRunQuery:n}),ce===Ae.PROMQL&&c.createElement(gr,{refId:r.refId,variableOptionGroup:_,onChange:pe,onRunQuery:n,datasource:e,query:G}),ce!==Ae.SLO&&c.createElement(mr,{refId:r.refId,variableOptionGroup:_,customMetaData:J,onChange:w,onRunQuery:n,datasource:e,query:r,range:a||(0,An.E2)()}),ce===Ae.SLO&&c.createElement(tr,{refId:r.refId,variableOptionGroup:_,customMetaData:J,onChange:T,onRunQuery:n,datasource:e,query:S,aliasBy:r.aliasBy,onChangeAliasBy:fe=>i({...r,aliasBy:fe})})))};var Cr=o(7521),Ar=o(38645);const Sr=t=>{const{value:e,placeholder:r,className:n,isSearchable:i,onChange:a}=t,s=xr(t),u=Ir(s,e),f=(0,c.useCallback)(m=>a(m.value),[a]);return c.createElement(we.l6,{className:n,isMulti:!1,isClearable:!1,backspaceRemovesValue:!1,onChange:f,options:s,isSearchable:i,maxMenuHeight:500,placeholder:r,noOptionsMessage:"No options found",value:u})},xr=({variables:t=[],options:e})=>(0,c.useMemo)(()=>!Array.isArray(t)||t.length===0?e:[{label:"Template Variables",options:t.map(({name:r})=>({label:`$${r}`,value:`$${r}`}))},...e],[t,e]),Ir=(t,e)=>(0,c.useMemo)(()=>(t.every(n=>n.options)?(0,g.flatten)(t.map(n=>n.options)):t).find(n=>n.value===e),[t,e]);var Lr=o(99818),Nr=o(93522),Dr=o(63021),wr=o(40675),Ut=o(8984),Or=o(13773),Mr=o(76323),$t=o(13544);const Pr=t=>{const[e,r]=(0,c.useState)(null),n=t.type==="submenu",i=(0,at.of)(Ur),a=t.iconClassName?(0,Ut.toIconName)(t.iconClassName):void 0;switch(t.type){case"divider":return c.createElement("li",{className:"divider"});case"group":return c.createElement("li",null,c.createElement("span",{className:i.groupLabel},t.text));default:return c.createElement("li",{className:n?`dropdown-submenu ${Rr(e)}`:void 0,ref:r,"data-testid":$t.Tp.components.Panels.Panel.menuItems(t.text)},c.createElement("a",{onClick:t.onClick,href:t.href,role:"menuitem"},a&&c.createElement(Xe.I,{name:a,className:i.menuIconClassName}),c.createElement("span",{className:"dropdown-item-text","data-testid":$t.Tp.components.Panels.Panel.headerItems(t.text)},t.text,n&&c.createElement(Xe.I,{name:"angle-right",className:i.shortcutIconClassName})),t.shortcut&&c.createElement("span",{className:"dropdown-menu-item-shortcut"},c.createElement(Xe.I,{name:"keyboard",className:i.menuIconClassName})," ",t.shortcut)),t.children)}};function Rr(t){if(!t)return"invisible";const e=t.parentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return r.width===0?"invisible":e.right+r.width+10>window.innerWidth?"pull-left":"pull-right"}function Ur(t){return{menuIconClassName:(0,Be.css)({marginRight:t.spacing(1),"a::after":{display:"none"}}),shortcutIconClassName:(0,Be.css)({position:"absolute",top:"7px",right:t.spacing(.5),color:t.colors.text.secondary}),groupLabel:(0,Be.css)({color:t.colors.text.secondary,fontSize:t.typography.size.sm,padding:t.spacing(.5,1)})}}const $r=({children:t,customCss:e})=>{if(!t||t.length===0)return null;const r=t.find(n=>n.active===!0);return c.createElement("div",{className:`gf-form-select-wrapper width-20 ${e}`},c.createElement("div",{className:"dropdown"},c.createElement("button",{type:"button",className:"gf-form-input dropdown-toggle","data-toggle":"dropdown",style:{textAlign:"left"}},r?.text),c.createElement("ul",{role:"menu",className:"dropdown-menu dropdown-menu--menu"},t.map(n=>n.hideFromTabs?null:c.createElement(Pr,{key:n.url,iconClassName:n.icon,text:n.text,href:n.url})))))},kr=({children:t})=>!t||t.length===0?null:c.createElement("nav",null,c.createElement($r,{customCss:"page-header__select-nav"},t),c.createElement(Dr.U,{className:"page-header__tabs",hideBorder:!0},t.map((e,r)=>!e.hideFromTabs&&c.createElement(wr.o,{label:e.text,active:e.active,key:`${e.url}-${r}`,icon:e.icon,href:e.url,suffix:e.tabSuffix})))),Br=({navItem:t,renderTitle:e,actions:r,info:n,subTitle:i})=>{const a=(0,at.of)(Fr);if(!t)return null;const s=u=>{const f=u.icon==="grafana"?12:14,m=u.icon&&(0,Ut.toIconName)(u.icon),C=i??u.subTitle;return c.createElement("div",{className:"page-header__inner"},c.createElement("span",{className:"page-header__logo"},m&&c.createElement(Xe.I,{name:m,size:"xxxl",style:{marginTop:f}}),u.img&&c.createElement("img",{className:"page-header__img",src:u.img,alt:""})),c.createElement("div",{className:(0,Be.cx)("page-header__info-block",a.headerText)},e?e(u.text):Gr(u.text,u.highlightText),n&&c.createElement(Or.Q,{info:n}),C&&c.createElement("div",{className:"page-header__sub-title"},C),r&&c.createElement("div",{className:a.actions},r)))};return c.createElement("div",{className:a.headerCanvas},c.createElement("div",{className:"page-container"},c.createElement("div",{className:"page-header"},s(t),t.children&&t.children.length>0&&c.createElement(kr,null,t.children))))};function Gr(t,e){return t?c.createElement("h1",{className:"page-header__title"},t,e&&c.createElement(Mr.J,{text:e,className:(0,Be.css)`
            vertical-align: middle;
          `})):null}const Fr=t=>({actions:(0,Be.css)({display:"flex",flexDirection:"row",gap:t.spacing(1)}),headerText:(0,Be.css)({display:"flex",flexDirection:"column",gap:t.spacing(1)}),headerCanvas:(0,Be.css)`
    background: ${t.colors.background.canvas};
  `}),{SecretFormField:Vr}=ln.LegacyForms;function jr(){xe("footer",Ar.wi,[]),xe("icon",Xe.I,["name","size","type",["onClick",{watchDepth:"reference",wrapApply:!0}]]),xe("spinner",cn.y,["inline"]),xe("helpModal",Nr.N,[]),xe("pageHeader",Br,["model","noTabs"]),xe("emptyListCta",Cr.A,["title","buttonIcon","buttonLink","buttonTitle",["onClick",{watchDepth:"reference",wrapApply:!0}],"proTip","proTipLink","proTipLinkTitle","proTipTarget","infoBox","infoBoxTitle"]),xe("tagFilter",Lr.$,["tags",["onChange",{watchDepth:"reference"}],["tagOptions",{watchDepth:"reference"}]]),xe("colorPicker",un.sk,["color",["onChange",{watchDepth:"reference",wrapApply:!0}]]),xe("seriesColorPickerPopover",dn.t,["color","series","onColorChange","onToggleAxis"]),xe("unitPicker",pn.p,["value","width",["onChange",{watchDepth:"reference",wrapApply:!0}]]),xe("metricSelect",Sr,["options","onChange","value","isSearchable","className","placeholder",["variables",{watchDepth:"reference"}]]),xe("cloudMonitoringQueryEditor",Tr,["target","onQueryChange","onExecuteQuery",["events",{watchDepth:"reference"}],["datasource",{watchDepth:"reference"}],["templateSrv",{watchDepth:"reference"}]]),xe("secretFormField",Vr,["value","isConfigured","inputWidth","labelWidth","aria-label",["onReset",{watchDepth:"reference",wrapApply:!0}],["onChange",{watchDepth:"reference",wrapApply:!0}]]),xe("graphContextMenu",hn.H,["x","y","itemsGroup",["onClose",{watchDepth:"reference",wrapApply:!0}],["getContextMenuSource",{watchDepth:"reference",wrapApply:!0}],["timeZone",{watchDepth:"reference",wrapApply:!0}]]),xe("drilldownLinksEditor",fn.e,["value","links","suggestions",["onChange",{watchDepth:"reference",wrapApply:!0}]]),xe("datasourceHttpSettingsNext",mn.t,["defaultUrl","showAccessOptions","dataSourceConfig","showForwardOAuthIdentityOption",["onChange",{watchDepth:"reference",wrapApply:!0}]]),xe("folderPicker",yn.sR,["labelClass","rootName","enableCreateNew","enableReset","initialTitle","initialFolderId","dashboardId","onCreateFolder",["enterFolderCreation",{watchDepth:"reference",wrapApply:!0}],["exitFolderCreation",{watchDepth:"reference",wrapApply:!0}],["onLoad",{watchDepth:"reference",wrapApply:!0}],["onChange",{watchDepth:"reference",wrapApply:!0}]]),xe("timePickerSettings",bn.p,["renderCount","refreshIntervals","timePickerHidden","nowDelay","timezone",["onTimeZoneChange",{watchDepth:"reference",wrapApply:!0}],["onRefreshIntervalChange",{watchDepth:"reference",wrapApply:!0}],["onNowDelayChange",{watchDepth:"reference",wrapApply:!0}],["onHideTimePickerChange",{watchDepth:"reference",wrapApply:!0}]]),xe("clipboardButton",gn.b,[["getText",{watchDepth:"reference",wrapApply:!0}]])}const mt=t=>e=>e.finally(t.$evalAsync),zr=`
<div class="dropdown cascade-open">
<a ng-click="showActionsMenu()" class="query-part-name pointer dropdown-toggle" data-toggle="dropdown">{{part.def.type}}</a>
<span>(</span><span class="query-part-parameters"></span><span>)</span>
<ul class="dropdown-menu">
  <li ng-repeat="action in partActions">
    <a ng-click="triggerPartAction(action)">{{action.text}}</a>
  </li>
</ul>
`;l.Ay.directive("queryPartEditor",["templateSrv",Kr]);function Kr(t){const e='<input type="text" class="hide input-mini tight-form-func-param"></input>';return{restrict:"E",template:zr,scope:{part:"=",handleEvent:"&",debounce:"@"},link:function(n,i){const a=n.part,s=a.def,u=i.find(".query-part-parameters"),f=n.debounce;n.partActions=[];function m(w){const Y=M()(this),J=Y.next();J.val(a.params[w]),J.css("width",Y.width()+16+"px"),Y.hide(),J.show(),J.focus(),J.select();const _=J.data("typeahead");_&&(J.val(""),_.lookup())}function C(w){const Y=M()(this),J=Y.prev(),_=Y.val();(_!==""||a.def.params[w].optional)&&(J.html(t.highlightVariablesAsHtml(_)),a.updateParam(Y.val(),w),n.$apply(()=>{n.handleEvent({$event:{name:"part-param-changed"}})})),Y.hide(),J.show()}function h(w,Y){Y.which===13&&C.call(this,w)}function S(){this.style.width=(3+this.value.length)*8+"px"}function T(w,Y,J){if(!Y.options&&!Y.dynamicLookup)return;const _=(Ee,fe)=>{if(Y.options){let Le=Y.options;return Y.type==="int"&&(Le=(0,g.map)(Le,ze=>ze.toString())),Le}n.$apply(()=>{n.handleEvent({$event:{name:"get-param-options"}}).then(Le=>{const ze=(0,g.map)(Le,Oe=>(0,g.escape)(Oe.value));fe(ze)})})};w.attr("data-provide","typeahead"),w.typeahead({source:_,minLength:0,items:1e3,updater:Ee=>(Ee=(0,g.unescape)(Ee),setTimeout(()=>{C.call(w[0],J)},0),Ee)});const ce=w.data("typeahead");ce.lookup=function(){this.query=this.$element.val()||"";const Ee=this.source(this.query,M().proxy(this.process,this));return Ee&&this.process(Ee)},f&&(ce.lookup=(0,g.debounce)(ce.lookup,500,{leading:!0}))}n.showActionsMenu=()=>{mt(n)(n.handleEvent({$event:{name:"get-part-actions"}}).then(w=>{n.partActions=w}))},n.triggerPartAction=w=>{n.handleEvent({$event:{name:"action",action:w}})};function G(){(0,g.each)(s.params,(w,Y)=>{if(w.optional&&a.params.length<=Y)return;Y>0&&M()("<span>, </span>").appendTo(u);const J=t.highlightVariablesAsHtml(a.params[Y]),_=M()('<a class="graphite-func-param-link pointer">'+J+"</a>"),ce=M()(e);_.appendTo(u),ce.appendTo(u),ce.blur((0,g.partial)(C,Y)),ce.keyup(S),ce.keypress((0,g.partial)(h,Y)),_.click((0,g.partial)(m,Y)),T(ce,w,Y)})}function pe(){u.empty(),G()}pe()}}}function Hr(t){let e=this.query;return e===""?!0:(e[0]==="/"&&(e=e.substring(1)),e[e.length-1]==="/"&&(e=e.substring(0,e.length-1)),t.toLowerCase().match(e.toLowerCase()))}class Wr{constructor(e,r,n,i){this.$scope=e,this.$sce=n,this.templateSrv=i,this.inputElement=r.find("input").first(),this.linkElement=r.find("a").first(),this.linkMode=!0,this.cancelBlur=null,this.labelMode=!1,this.lookupText=!1,this.debounce=!1,e.$watch("ctrl.model",this.modelChanged.bind(this))}static{this.$inject=["$scope","$element","$sce","templateSrv"]}$onInit(){this.labelMode?this.cssClasses="gf-form-label "+this.cssClass:this.cssClasses="gf-form-input gf-form-input--dropdown "+this.cssClass,this.placeholder&&this.inputElement.attr("placeholder",this.placeholder),this.inputElement.attr("data-provide","typeahead"),this.inputElement.typeahead({source:this.typeaheadSource.bind(this),minLength:0,items:1e4,updater:this.typeaheadUpdater.bind(this),matcher:Hr});const e=this.inputElement.data("typeahead");e.lookup=function(){this.query=this.$element.val()||"",this.source(this.query,this.process.bind(this))},this.debounce&&(e.lookup=(0,g.debounce)(e.lookup,500,{leading:!0})),this.linkElement.keydown(r=>{(r.keyCode===40||r.keyCode===13)&&this.linkElement.click()}),this.inputElement.keydown(r=>{r.keyCode===13&&setTimeout(()=>{this.inputElement.blur()},300)}),this.inputElement.blur(this.inputBlur.bind(this)),this.startOpen&&setTimeout(this.open.bind(this),0)}getOptionsInternal(e){return mt(this.$scope)(Promise.resolve(this.getOptions({$query:e})))}isPromiseLike(e){return e&&typeof e.then=="function"}modelChanged(){(0,g.isObject)(this.model)?this.updateDisplay(this.model.text):this.lookupText?this.getOptionsInternal("").then(e=>{const r=(0,g.find)(e,{value:this.model});this.updateDisplay(r?r.text:this.model)}):this.updateDisplay(this.model)}typeaheadSource(e,r){this.getOptionsInternal(e).then(n=>{this.optionCache=n;const i=(0,g.map)(n,a=>(0,g.escape)(a.text));this.allowCustom&&this.text!==""&&(0,g.indexOf)(i,this.text)===-1&&i.unshift(this.text),r(i)})}typeaheadUpdater(e){return e===this.text?(clearTimeout(this.cancelBlur),this.inputElement.focus(),e):(this.inputElement.val(e),this.switchToLink(!0),e)}switchToLink(e){this.linkMode&&!e||(clearTimeout(this.cancelBlur),this.cancelBlur=null,this.linkMode=!0,this.inputElement.hide(),this.linkElement.show(),this.updateValue(this.inputElement.val()))}inputBlur(){this.cancelBlur=setTimeout(this.switchToLink.bind(this),200)}updateValue(e){e=(0,g.unescape)(e),!(e===""||this.text===e)&&this.$scope.$apply(()=>{const r=(0,g.find)(this.optionCache,{text:e});r?((0,g.isObject)(this.model)?this.model=r:this.model=r.value,this.text=r.text):this.allowCustom&&((0,g.isObject)(this.model)?this.model.text=this.model.value=e:this.model=e,this.text=e),this.$scope.$$postDigest(()=>{this.$scope.$apply(()=>{this.onChange({$option:r})})})})}updateDisplay(e){this.text=e,this.display=this.$sce.trustAsHtml(this.templateSrv.highlightVariablesAsHtml(e))}open(){this.inputElement.css("width",Math.max(this.linkElement.width(),80)+16+"px"),this.inputElement.show(),this.inputElement.focus(),this.linkElement.hide(),this.linkMode=!1;const e=this.inputElement.data("typeahead");e&&(this.inputElement.val(""),e.lookup())}}const Qr=`
<input type="text"
  data-provide="typeahead"
  class="gf-form-input"
  spellcheck="false"
  style="display:none">
</input>
<a ng-class="ctrl.cssClasses"
   tabindex="1"
   ng-click="ctrl.open()"
   give-focus="ctrl.focus"
   ng-bind-html="ctrl.display || '&nbsp;'">
</a>
`;function Yr(){return{restrict:"E",template:Qr,controller:Wr,bindToController:!0,controllerAs:"ctrl",scope:{model:"=",getOptions:"&",onChange:"&",cssClass:"@",allowCustom:"@",labelMode:"@",lookupText:"@",placeholder:"@",startOpen:"@",debounce:"@"}}}l.Ay.directive("gfFormDropdown",Yr);const Xr=`
<div class="baron__track">
  <div class="baron__bar"></div>
</div>
`,Jr="baron baron__root",Zr="baron__scroller";function qr(){return{restrict:"A",link:(t,e,r)=>{let n=e.parent();const i=e;r.grafanaScrollbar&&r.grafanaScrollbar==="scrollonroot"&&(n=i),n.addClass(Jr),M()(Xr).appendTo(n),e.addClass(Zr);const a={root:n[0],scroller:i[0],bar:".baron__bar",barOnCls:"_scrollbar",scrollingCls:"_scrolling",track:".baron__track",direction:"v"},s=L()(a);t.$on("$destroy",()=>{s.dispose()})}}}l.Ay.directive("grafanaScrollbar",qr);var _r=o(44533);l.Ay.directive("jsonTree",[function(){return{restrict:"E",scope:{object:"=",startExpanded:"@",rootName:"@"},link:(e,r)=>{let n=e.startExpanded;e.startExpanded==="true"?n=2:e.startExpanded==="false"&&(n=1);const i={[e.rootName]:e.object},s=new _r.O(i,n,{animateOpen:!0}).render(!0);r.append(s)}}}]);const ei=`
<label for="check-{{ctrl.id}}" class="gf-form-switch-container">
  <div class="gf-form-label {{ctrl.labelClass}}" ng-show="ctrl.label">
    {{ctrl.label}}
    <info-popover mode="right-normal" ng-if="ctrl.tooltip" position="top center">
      {{ctrl.tooltip}}
    </info-popover>
  </div>
  <div class="gf-form-switch {{ctrl.switchClass}}" ng-if="ctrl.show">
    <input id="check-{{ctrl.id}}" type="checkbox" ng-model="ctrl.checked" ng-change="ctrl.internalOnChange()">
    <span class="gf-form-switch__slider"></span>
  </div>
</label>
`,ti=`
<label for="check-{{ctrl.id}}" class="gf-form-switch-container">
   <div class="gf-form-label {{ctrl.labelClass}}" ng-show="ctrl.label">
    {{ctrl.label}}
    <info-popover mode="right-normal" ng-if="ctrl.tooltip" position="top center">
      {{ctrl.tooltip}}
    </info-popover>
  </div>
  <div class="gf-form-checkbox {{ctrl.switchClass}}" ng-if="ctrl.show">
    <input id="check-{{ctrl.id}}" type="checkbox" ng-model="ctrl.checked" ng-change="ctrl.internalOnChange()">
    <span class="gf-form-switch__checkbox"></span>
  </div>
</label>
`;class kt{constructor(e,r){this.$timeout=r,this.show=!0,this.id=e.$id}static{this.$inject=["$scope","$timeout"]}internalOnChange(){return this.$timeout(()=>this.onChange())}}function ni(){return{restrict:"E",controller:kt,controllerAs:"ctrl",bindToController:!0,scope:{checked:"=",label:"@",labelClass:"@",tooltip:"@",switchClass:"@",onChange:"&"},template:ei}}function ri(){return{restrict:"E",controller:kt,controllerAs:"ctrl",bindToController:!0,scope:{checked:"=",label:"@",labelClass:"@",tooltip:"@",switchClass:"@",onChange:"&"},template:ti}}l.Ay.directive("gfFormSwitch",ni),l.Ay.directive("gfFormCheckbox",ri);function ii(){return{restrict:"E",template:`<icon name="'info-circle'" style="margin-left: 10px;" size="'xs'"></icon>`,transclude:!0,link:(t,e,r,n,i)=>{const a=r.offset||"0 -10px",s=r.position||"right middle";let u="drop-help drop-hide-out-of-bounds";const f="hover";e.addClass("gf-form-help-icon"),r.wide&&(u+=" drop-wide"),r.mode&&e.addClass("gf-form-help-icon--"+r.mode),i((m,C)=>{const h=document.createElement("div");h.className="markdown-html",(0,g.each)(m,T=>{h.appendChild(T)});const S={target:e[0],content:h,position:s,classes:u,openOn:f,hoverOpenDelay:400,tetherOptions:{offset:a,constraints:[{to:"window",attachment:"together",pin:!0}]}};t.$applyAsync(()=>{const T=new(le())(S),G=t.$on("$destroy",()=>{T.destroy(),G()})})})}}}l.Ay.directive("infoPopover",ii),l.Ay.directive("spectrumPicker",ai);function ai(){return{restrict:"E",require:"ngModel",scope:!0,replace:!0,template:'<color-picker color="ngModel.$viewValue" on-change="onColorChange"></color-picker>',link:(t,e,r,n)=>{t.ngModel=n,t.onColorChange=i=>{n.$setViewValue(i)}}}}var Qe=o(2913);const oi="ace/theme/grafana-dark",si="ace/theme/textmate",li="text",ci=10,ui=2,di=!0,pi=!0,hi="<div></div>";async function fi(t,e,r){const n=r.mode||li,i=r.maxLines||ci,a=r.showGutter!==void 0,s=r.tabSize||ui,u=r.behavioursEnabled?r.behavioursEnabled==="true":di,f=r.snippetsEnabled?r.snippetsEnabled==="true":pi,m=e.get(0),{default:C}=await o.e(3832).then(o.t.bind(o,47496,23));await o.e(6464).then(o.t.bind(o,6464,23)),await o.e(2694).then(o.t.bind(o,52694,23)),await o.e(7391).then(o.t.bind(o,57391,23)),await o.e(2228).then(o.t.bind(o,32228,23)),await o.e(2514).then(o.t.bind(o,32514,23)),await o.e(7515).then(o.t.bind(o,17515,23)),await o.e(4289).then(o.t.bind(o,54289,23)),await o.e(1708).then(o.t.bind(o,11708,23)),await o.e(7613).then(o.t.bind(o,7613,23)),await o.e(8730).then(o.t.bind(o,98730,23)),await o.e(9118).then(o.t.bind(o,59118,23)),await o.e(5277).then(o.t.bind(o,45277,23)),await o.e(9384).then(o.t.bind(o,69384,23));const h=C.edit(m),S=h.getSession(),T={maxLines:i,showGutter:a,tabSize:s,behavioursEnabled:u,highlightActiveLine:!1,showPrintMargin:!1,autoScrollEditorIntoView:!0};h.setOptions(T),h.$blockScrolling=1/0,h.renderer.setScrollMargin(10,10),h.renderer.setPadding(10),w(),pe(n),Y(t.content),e.addClass("gf-code-editor");const G=e.find("textarea");G.addClass("gf-form-input"),G.attr("aria-label",r.textareaLabel),t.codeEditorFocus&&setTimeout(()=>{G.focus();const J=G[0];if(J.setSelectionRange){const _=G.val().length*2;J.setSelectionRange(_,_)}},100),S.on("change",J=>{t.$apply(()=>{const _=h.getValue();t.content=_})}),t.$watch("content",(J,_)=>{const ce=h.getValue();J!==ce&&J!==_&&t.$$postDigest(()=>{Y(J)})}),h.on("blur",()=>{t.onChange()}),t.$on("$destroy",()=>{h.destroy()}),h.commands.addCommand({name:"executeQuery",bindKey:{win:"Ctrl-Enter",mac:"Command-Enter"},exec:()=>{t.onChange()}});function pe(J){if(C.acequire("ace/ext/language_tools"),h.setOptions({enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:f}),t.getCompleter()){const ce=h;ce.completers=ce.completers.slice(),ce.completers.push(t.getCompleter())}const _=`ace/mode/${J}`;S.setMode(_)}function w(){let J=oi;Qe.Ay.bootData.user.lightTheme&&(J=si),h.setTheme(J)}function Y(J){h.setValue(J),h.clearSelection()}}function mi(){return{restrict:"E",template:hi,scope:{content:"=",datasource:"=",codeEditorFocus:"<",onChange:"&",getCompleter:"&"},link:fi}}l.Ay.directive("codeEditor",mi);const gi=`
<div class="dropdown cascade-open">
<a ng-click="showActionsMenu()" class="query-part-name pointer dropdown-toggle" data-toggle="dropdown">{{part.label}}</a>
<span>{{part.def.wrapOpen}}</span><span class="query-part-parameters"></span><span>{{part.def.wrapClose}}</span>
<ul class="dropdown-menu">
  <li ng-repeat="action in partActions">
    <a ng-click="triggerPartAction(action)">{{action.text}}</a>
  </li>
</ul>
`;l.Ay.directive("sqlPartEditor",["templateSrv",vi]);function vi(t){const e='<input type="text" class="hide input-mini"></input>';return{restrict:"E",template:gi,scope:{part:"=",handleEvent:"&",debounce:"@"},link:function(n,i){const a=n.part,s=a.def,u=i.find(".query-part-parameters"),f=n.debounce;let m=null;n.partActions=[];function C(J){const _=M()(this),ce=_.next();ce.val(a.params[J]),ce.css("width",_.width()+16+"px"),_.hide(),ce.show(),ce.focus(),ce.select();const Ee=ce.data("typeahead");Ee&&(ce.val(""),Ee.lookup())}function h(J,_){m=setTimeout(()=>{S(J,_)},200)}function S(J,_){const ce=J.prev(),Ee=J.val();(Ee!==""||a.def.params[_].optional)&&(ce.html(t.highlightVariablesAsHtml(Ee)),a.updateParam(J.val(),_),n.$apply(()=>{n.handleEvent({$event:{name:"part-param-changed"}})})),J.hide(),ce.show()}function T(J,_){_.which===13&&S(M()(this),J)}function G(){this.style.width=(3+this.value.length)*8+"px"}function pe(J,_,ce){if(!_.options&&!_.dynamicLookup)return;const Ee=(Le,ze)=>{if(_.options){let Oe=_.options;return _.type==="int"&&(Oe=(0,g.map)(Oe,$e=>$e.toString())),Oe}n.$apply(()=>{n.handleEvent({$event:{name:"get-param-options",param:_}}).then(Oe=>{const $e=(0,g.map)(Oe,ke=>(0,g.escape)(ke.value));(0,g.indexOf)($e,a.params[ce])===-1&&$e.unshift((0,g.escape)(a.params[ce])),ze($e)})})};J.attr("data-provide","typeahead"),J.typeahead({source:Ee,minLength:0,items:1e3,updater:Le=>(Le=(0,g.unescape)(Le),Le===a.params[ce]&&(clearTimeout(m),J.focus()),Le)});const fe=J.data("typeahead");fe.lookup=function(){this.query=this.$element.val()||"";const Le=this.source(this.query,M().proxy(this.process,this));return Le&&this.process(Le)},f&&(fe.lookup=(0,g.debounce)(fe.lookup,500,{leading:!0}))}n.showActionsMenu=()=>{n.handleEvent({$event:{name:"get-part-actions"}}).then(J=>{n.partActions=J})},n.triggerPartAction=J=>{n.handleEvent({$event:{name:"action",action:J}})};function w(){(0,g.each)(s.params,(J,_)=>{if(J.optional&&a.params.length<=_)return;_>0&&M()("<span>"+s.separator+"</span>").appendTo(u);const ce=t.highlightVariablesAsHtml(a.params[_]),Ee=M()('<a class="query-part__link">'+ce+"</a>"),fe=M()(e);Ee.appendTo(u),fe.appendTo(u),fe.blur((0,g.partial)(h,fe,_)),fe.keyup(G),fe.keypress((0,g.partial)(T,_)),Ee.click((0,g.partial)(C,_)),pe(fe,J,_)})}function Y(){u.empty(),w()}Y()}}}l.m7.directive("datasourceHttpSettings",()=>({scope:{current:"=",suggestUrl:"@",noDirectAccess:"@",showForwardOAuthIdentityOption:"@"},templateUrl:"public/app/angular/partials/http_settings_next.html",link:{pre:t=>{t.showAccessOption=t.noDirectAccess!=="true",t.onChange=e=>{t.current=e}}}})),l.m7.directive("datasourceTlsAuthSettings",()=>({scope:{current:"="},templateUrl:"public/app/angular/partials/tls_auth_settings.html"}));var Bt=o(15162),gt=o(54427);l.Ay.directive("pluginComponent",["$compile","$http","$templateCache","$location",Ei]);function Ei(t,e,r,n){function i(h){if(h.template)return Promise.resolve(h.template);const S=r.get(h.templateUrl);return S?Promise.resolve(S):e.get(h.templateUrl).then(T=>T.data)}function a(h,S){if(h)return h.indexOf("public")===0?h:S+"/"+h}function s(h){return h.Component.templateUrl=a(h.Component.templateUrl,h.baseUrl),()=>({templateUrl:h.Component.templateUrl,template:h.Component.template,restrict:"E",controller:h.Component,controllerAs:"ctrl",bindToController:!0,scope:h.bindings,link:(S,T,G,pe)=>{pe.link&&pe.link(S,T,G,pe),pe.init&&pe.init()}})}function u(h,S){const T={name:"panel-plugin-"+h.panel.type,bindings:{dashboard:"=",panel:"=",row:"="},attrs:{dashboard:"dashboard",panel:"panel",class:"panel-height-helper"}},G=Qe.Ay.panels[h.panel.type];return(0,Bt.TV)(G.id).then(pe=>{const w=pe.angularPanelCtrl;return T.Component=w,!w||w.registered?T:w.templatePromise?w.templatePromise.then(Y=>T):(G&&(w.templateUrl=a(w.templateUrl,G.baseUrl)),w.templatePromise=i(w).then(Y=>(w.templateUrl=null,w.template=`<grafana-panel ctrl="ctrl" class="panel-height-helper">${Y}</grafana-panel>`,{...T,baseUrl:G.baseUrl})),w.templatePromise)})}function f(h,S){switch(S.type){case"query-ctrl":{const T=h.ctrl.datasource;return Promise.resolve({baseUrl:T.meta.baseUrl,name:"query-ctrl-"+T.meta.id,bindings:{target:"=",panelCtrl:"=",datasource:"="},attrs:{target:"ctrl.target","panel-ctrl":"ctrl",datasource:"ctrl.datasource"},Component:T.components.QueryCtrl})}case"annotations-query-ctrl":{const T=h.ctrl.currentDatasource.meta.baseUrl,G=h.ctrl.currentDatasource.meta.id;return(0,gt.cS)(h.ctrl.currentDatasource.meta).then(pe=>({baseUrl:T,name:"annotations-query-ctrl-"+G,bindings:{annotation:"=",datasource:"="},attrs:{annotation:"ctrl.currentAnnotation",datasource:"ctrl.currentDatasource"},Component:pe.components.AnnotationsQueryCtrl}))}case"datasource-config-ctrl":{const T=h.ctrl.datasourceMeta,G=n.url();return(0,gt.cS)(T).then(pe=>(h.$watch("ctrl.current",()=>{G===n.url()&&h.onModelChanged(h.ctrl.current)},!0),{baseUrl:T.baseUrl,name:"ds-config-"+T.id,bindings:{meta:"=",current:"="},attrs:{meta:"ctrl.datasourceMeta",current:"ctrl.current"},Component:pe.angularConfigCtrl}))}case"app-config-ctrl":{const T=h.ctrl.model;return(0,gt.ui)(T).then(G=>({baseUrl:T.baseUrl,name:"app-config-"+T.id,bindings:{appModel:"=",appEditCtrl:"="},attrs:{"app-model":"ctrl.model","app-edit-ctrl":"ctrl"},Component:G.angularConfigCtrl}))}case"panel":return u(h,S);default:return Promise.reject({message:"Could not find component type: "+S.type})}}function m(h,S,T){const G=y().element(document.createElement(T.name));(0,g.each)(T.attrs,(pe,w)=>{G.attr(w,pe)}),t(G)(h),S.empty(),setTimeout(()=>{h.$applyAsync(()=>{S.append(G),setTimeout(()=>{h.$applyAsync(()=>{h.$broadcast(P.ee.componentDidMount.name)})})})})}function C(h,S,T,G){if(G.notFound){S.empty();return}if(!G.Component)throw{message:"Failed to find exported plugin component for "+G.name};if(!G.Component.registered){const pe=T.$normalize(G.name),w=s(G);l.Ay.directive(pe,w),G.Component.registered=!0}m(h,S,G)}return{restrict:"E",link:(h,S,T)=>{f(h,T).then(G=>{C(h,S,T,G)}).catch(G=>{console.error("Plugin component error",G)})}}}var Gt=o(7376),yi=o(81634),bi=o(24284),qe=o(28138);class Ti{static{this.$inject=["$scope","utilSrv","$rootScope","contextSrv","angularLoader","$injector"]}constructor(e,r,n,i,a,s){(0,Gt.w)(a),(0,yi.j)(s),e.init=()=>{e.contextSrv=i,e.appSubUrl=Qe.Ay.appSubUrl,e._=oe(),r.init()},n.colors=bi.Tj,n.onAppEvent=function(u,f,m){let C;typeof u=="string"?C=n.$on(u,f):C=n.$on(u.name,f);let h=this;h.$id===1&&!m&&console.warn("warning rootScope onAppEvent called without localscope"),m&&(h=m),h.$on("$destroy",C)},n.appEvent=(u,f)=>{typeof u=="string"?(n.$emit(u,f),qe.A.emit(u,f)):(n.$emit(u.name,f),qe.A.emit(u,f))},e.init()}}function Ci(){return{restrict:"E",controller:Ti,link:(t,e)=>{const r=M()("body");M().fn.modal.Constructor.prototype.enforceFocus=()=>{};let n=new Date().getTime(),i=!0;const a=60*5e3;function s(){i&&r.hasClass("page-dashboard")&&new Date().getTime()-n>a&&(i=!1,r.addClass("view-mode--inactive"))}function u(){n=new Date().getTime(),i||(i=!0,r.removeClass("view-mode--inactive"))}r.mousemove(u),r.keydown(u),document.addEventListener("wheel",u,{capture:!0,passive:!0}),document.addEventListener("visibilitychange",u),setInterval(s,2e3),r.click(f=>{const m=M()(f.target);if(m.parents().length===0)return;r.find(".dropdown-menu-open").removeClass("dropdown-menu-open");const C=m.closest("[data-click-hide]");if(C.length){const S=C.parent();C.detach(),setTimeout(()=>{S.append(C)},100)}const h=e.find(".popover");h.length>0&&m.parents(".graph-legend").length===0&&h.hide()})}}}l.Ay.directive("grafanaApp",Ci);var va=o(23345),Ea=o(26415),ya=o(74526),Ai=o(16233),Si=o(17493),xi=o(74856),Ii=o(63770),Li=o(94429),Ni=o(5808),Ft=o(12131);class Di{constructor(){this.$get=()=>{},(0,Ft.Lc)("Patch angular",!1,"RouteParamsProvider")}}class wi{constructor(){(0,Ft.Lc)("Patch angular",!1,"RouteProvider")}$get(){return this}}var Oi=o(4244);const Mi=()=>{l.m7.config(["$provide",t=>{t.decorator("$browser",["$delegate",e=>(e.onUrlChange=()=>{},e.url=()=>"",e)])}])},Pi=()=>{l.m7.config(["$provide",t=>{t.decorator("$location",["$delegate",e=>(e=new Oi.b,e)])}]),l.m7.provider("$route",wi),l.m7.provider("$routeParams",Di)};function Ri(){Mi(),Pi()}function Ui(t){t.oldInvoke=t.invoke,t.invoke=(e,r,n,i)=>{const a=n?.$scope?.$parent;return a&&(a.panel&&(r.panel=a.panel),a.dashboard&&(r.dashboard=a.dashboard),a.ctrl?.target&&(r.panelCtrl=a.ctrl,r.datasource=a.ctrl.datasource,r.target=a.ctrl.target),a.ctrl?.datasourceMeta&&(r.meta=a.ctrl.datasourceMeta,r.current=a.ctrl.current),a.ctrl?.currentAnnotation&&(r.annotation=a.ctrl.currentAnnotation,r.datasource=a.ctrl.currentDatasource),a.isAppConfigCtrl&&(r.appEditCtrl=a.ctrl,r.appModel=a.ctrl.model),a.$parent?.$parent?.ctrl?.appModel&&(r.appModel=a.$parent?.$parent?.ctrl?.appModel)),t.oldInvoke(e,r,n,i)}}var $i=o(39741),ki=o(18226),Vt=o(14792);function Bi(t){return function(r){const n=(0,c.useRef)(null),i=(0,c.useRef)(),a=(0,c.useRef)();return(0,c.useEffect)(()=>{if(!n.current)return;const s=(0,Gt.E)(),u='<plugin-component type="panel" class="panel-height-helper"></plugin-component>',f=new Fi,m=new Gi(t,r,f);i.current={panel:m,dashboard:(0,Vt.UA)().getCurrent(),size:{width:r.width,height:r.height},queryRunner:f},a.current=s.load(n.current,i.current,u)},[]),(0,c.useEffect)(()=>{a.current&&(i.current.size.height=r.height,i.current.size.width=r.width,i.current.panel.events.publish(new p.XM))},[r.width,r.height]),(0,c.useEffect)(()=>{i.current?.panel&&i.current.queryRunner.forwardNewData(r.data)},[r.data]),c.createElement("div",{ref:n,className:"panel-height-helper"})}}class Gi{constructor(e,r,n){r.options.angularOptions&&Object.assign(this,r.options.angularOptions),this.id=r.id,this.type=e.meta.id,this.title=r.title,this.fieldConfig=r.fieldConfig,this.options=r.options,this.plugin=e,this.events=new ki.o,this.queryRunner=n}refresh(){this.events.publish(new V._)}render(){this.events.publish(new p.XM)}getQueryRunner(){return this.queryRunner}}class Fi{constructor(){this.subject=new $i.m(1)}getData(e){return this.subject}forwardNewData(e){this.subject.next(e)}run(){}}var Vi=o(17172),ji=o(19347),zi=o(10096),Ki=o(71500),Hi=o(6923),Ue=o(95344);class Wi{constructor(){}init(){qe.l.subscribe(p.Ps,e=>this.showModal(e.payload)),qe.l.subscribe(p.aP,this.hideModal.bind(this))}hideModal(){(0,Ue.l)("UtilSrv","hideModal",""),this.modalScope&&this.modalScope.dismiss&&this.modalScope.dismiss()}showModal(e){(0,Ue.l)("UtilSrv","showModal","publish ShowModalReactEvent")}}var vt=o(10154);class Qi{clearPromiseCaches(){(0,Ue.l)("annotations_srv.ts","clearPromiseCaches","DashboardQueryRunner")}getAnnotations(e){return(0,Ue.l)("annotations_srv.ts","getAnnotations","DashboardQueryRunner.getResult"),Promise.resolve({annotations:[],alertState:void 0})}getAlertStates(e){return(0,Ue.l)("annotations_srv.ts","getAlertStates","DashboardQueryRunner.getResult"),Promise.resolve(void 0)}getGlobalAnnotations(e){return(0,Ue.l)("annotations_srv.ts","getGlobalAnnotations","DashboardQueryRunner.getResult"),Promise.resolve([])}saveAnnotationEvent(e){return(0,Ue.l)("annotations_srv.ts","saveAnnotationEvent","api/saveAnnotation"),(0,vt.vJ)(e)}updateAnnotationEvent(e){return(0,Ue.l)("annotations_srv.ts","updateAnnotationEvent","api/updateAnnotation"),(0,vt.rJ)(e)}deleteAnnotationEvent(e){return(0,Ue.l)("annotations_srv.ts","deleteAnnotationEvent","api/deleteAnnotation"),(0,vt.Xm)(e)}translateQueryResult(e,r){(0,Ue.l)("annotations_srv.ts","translateQueryResult","DashboardQueryRunner/utils/translateQueryResult"),e.snapshotData&&(e=(0,g.cloneDeep)(e),delete e.snapshotData);for(const n of r)n.source=e,n.color=e.iconColor,n.type=e.name,n.isRegion=n.timeEnd&&n.time!==n.timeEnd;return r}}function Yi(){l.Ay.factory("backendSrv",()=>(0,Vi.AI)()),l.Ay.factory("contextSrv",()=>zi.TP),l.Ay.factory("dashboardSrv",()=>(0,Vt.UA)()),l.Ay.factory("datasourceSrv",()=>(0,ji.l)()),l.Ay.factory("linkSrv",()=>(0,Hi.mQ)()),l.Ay.factory("validationSrv",()=>Ki.P),l.Ay.service("annotationsSrv",Qi),l.Ay.service("utilSrv",Wi)}const Xi={angular:{...y(),default:y()},"app/core/core_module":{default:l.m7,__useDefault:!0},"app/core/core":{appEvents:qe.A,contextSrv:Ai.TP,coreModule:l.m7},"app/plugins/sdk":Ni,"app/core/utils/promiseToDigest":{promiseToDigest:mt}};class Ji{constructor(){this.preBootModules=[],this.ngModuleDependencies=[],this.registerFunctions={}}init(){const e=y().module("grafana",[]);(0,Bt.f7)(Bi),e.config(["$controllerProvider","$compileProvider","$filterProvider","$httpProvider","$provide","$sceDelegateProvider",(n,i,a,s,u,f)=>{Qe.config.buildInfo.env!=="development"&&i.debugInfoEnabled(!1),s.useApplyAsync(!0),Qe.config.pluginsCDNBaseURL&&f.trustedResourceUrlList(["self",`${Qe.config.pluginsCDNBaseURL}/**`]),this.registerFunctions.controller=n.register,this.registerFunctions.directive=i.directive,this.registerFunctions.factory=u.factory,this.registerFunctions.service=u.service,this.registerFunctions.filter=a.register,u.decorator("$http",["$delegate","$templateCache",(m,C)=>{const h=m.get;return m.get=(S,T)=>(S.match(/\.html$/)&&(C.get(S)||(S+="?v="+new Date().getTime())),h(S,T)),m}])}]),this.ngModuleDependencies=["grafana.core","ngSanitize","grafana","pasvaz.bindonce","react"],l.yF.forEach(n=>{this.useModule(n)}),y().module("grafana.services").service("dashboardLoaderSrv",Si.Fu),l.m7.factory("timeSrv",()=>(0,xi.jG)()),l.m7.factory("templateSrv",()=>(0,Lt.w)()),jr(),Yi(),Ri();const r=(0,Li.kB)(Xi);Ii.z.addImportMap({imports:r}),$.fn.tooltip.defaults.animation=!1}useModule(e){return this.preBootModules?this.preBootModules.push(e):(0,g.extend)(e,this.registerFunctions),this.ngModuleDependencies.push(e.name),e}bootstrap(){const e=y().bootstrap(document.getElementById("ngRoot"),this.ngModuleDependencies);return Ui(e),e.invoke(()=>(this.preBootModules.forEach(r=>{(0,g.extend)(r,this.registerFunctions)}),()=>{})),e}}},59559:(N,x,o)=>{"use strict";o.d(x,{a:()=>k});var F=o(2543),L=o.n(F);class k{constructor(V,l){this.$scope=V,this.$injector=l,this.panelCtrl=this.panelCtrl??V.ctrl.panelCtrl,this.target=this.target??V.ctrl.target,this.datasource=this.datasource??V.ctrl.datasource,this.panel=this.panelCtrl?.panel??V.ctrl.panelCtrl.panel,this.isLastQuery=(0,F.indexOf)(this.panel.targets,this.target)===this.panel.targets.length-1}refresh(){this.panelCtrl.refresh()}}},50410:(N,x,o)=>{"use strict";let F=o(12631);F.keys().forEach(L=>{F(L)})},7521:(N,x,o)=>{"use strict";o.d(x,{A:()=>I});var F=o(32196),L=o(96540),k=o(13544),P=o(14578),V=o(55852),l=o(76442);const p=(0,F.css)({textAlign:"center"}),v=(0,F.css)({maxWidth:"700px",margin:"0 auto"}),I=({title:y,buttonIcon:ie,buttonLink:ae,buttonTitle:X,buttonDisabled:ee,onClick:B,proTip:H,proTipLink:g,proTipLinkTitle:oe,proTipTarget:te,infoBox:O,infoBoxTitle:K})=>{const re=()=>L.createElement(L.Fragment,null,H?L.createElement("span",{key:"proTipFooter"},L.createElement(P.I,{name:"rocket"}),L.createElement(L.Fragment,null," ProTip: ",H," "),g&&L.createElement("a",{href:g,target:te,className:"text-link"},oe)):"",O?L.createElement("div",{key:"infoBoxHtml",className:`grafana-info-box ${v}`},K&&L.createElement("h5",null,K),L.createElement("div",{dangerouslySetInnerHTML:O})):""),b=re()?"":(0,F.css)({marginBottom:"20px"}),de=ae?V.z9:V.$n,c=L.createElement(de,{size:"lg",onClick:B,href:ae,icon:ie,className:b,"data-testid":k.Tp.components.CallToActionCard.buttonV2(X),disabled:ee},X);return L.createElement(l.c,{className:p,message:y,footer:re(),callToActionElement:c})}},76323:(N,x,o)=>{"use strict";o.d(x,{J:()=>V});var F=o(32196),L=o(96540),k=o(14110),P=o(40845);const V=({text:p="PRO",className:v,experimentId:d,eventVariant:I="",...y})=>{const ie=(0,P.of)(l);return(0,L.useEffect)(()=>{d&&(0,k.Xp)(d,"test",I)},[d,I]),L.createElement("span",{className:(0,F.cx)(ie.badge,v),...y},p)},l=p=>({badge:(0,F.css)`
      margin-left: ${p.spacing(1.25)};
      border-radius: ${p.shape.borderRadius(5)};
      background-color: ${p.colors.success.main};
      padding: ${p.spacing(.25,.75)};
      color: white; // use the same color for both themes
      font-weight: ${p.typography.fontWeightMedium};
      font-size: ${p.typography.pxToRem(10)};
    `})},5808:(N,x,o)=>{"use strict";o.r(x),o.d(x,{MetricsPanelCtrl:()=>p,PanelCtrl:()=>l,QueryCtrl:()=>v,loadPluginCss:()=>L.PL});var F=o(92341),L=o(89191),k=o(75519),P=o(70225),V=o(59559);const l=(0,F.Y)(P.y),p=(0,F.Y)(k.F),v=(0,F.Y)(V.a)},42346:()=>{(function(N){"use strict";var x={tagClass:function(l){return"label label-info"},itemValue:function(l){return l&&l.toString()},itemText:function(l){return this.itemValue(l)},freeInput:!0,maxTags:void 0,confirmKeys:[13],onTagExists:function(l,p){p.hide().fadeIn()}};function o(l,p){this.itemsArray=[],this.$element=N(l),this.$element.hide(),this.widthClass=p.widthClass||"width-9",this.isSelect=l.tagName==="SELECT",this.multiple=this.isSelect&&l.hasAttribute("multiple"),this.objectItems=p&&p.itemValue,this.placeholderText=l.hasAttribute("placeholder")?this.$element.attr("placeholder"):"",this.$container=N('<div class="bootstrap-tagsinput"></div>'),this.$input=N('<input class="gf-form-input '+this.widthClass+'" type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container),this.$element.after(this.$container),this.build(p)}o.prototype={constructor:o,add:function(l,p){var v=this;if(!(v.options.maxTags&&v.itemsArray.length>=v.options.maxTags)&&!(l!==!1&&!l)){if(typeof l=="object"&&!v.objectItems)throw"Can't add objects when itemValue option is not set";if(!l.toString().match(/^\s*$/)){if(v.isSelect&&!v.multiple&&v.itemsArray.length>0&&v.remove(v.itemsArray[0]),typeof l=="string"&&this.$element[0].tagName==="INPUT"){var d=l.split(",");if(d.length>1){for(var I=0;I<d.length;I++)this.add(d[I],!0);p||v.pushVal();return}}var y=v.options.itemValue(l),ie=v.options.itemText(l),ae=v.options.tagClass(l),X=N.grep(v.itemsArray,function(g){return v.options.itemValue(g)===y})[0];if(X){if(v.options.onTagExists){var ee=N(".tag",v.$container).filter(function(){return N(this).data("item")===X});v.options.onTagExists(l,ee)}return}v.itemsArray.push(l);var B=N('<span class="tag '+P(ae)+'">'+P(ie)+'<span data-role="remove"></span></span>');if(B.data("item",l),v.findInputWrapper().before(B),B.after(" "),v.isSelect&&!N('option[value="'+escape(y)+'"]',v.$element)[0]){var H=N("<option selected>"+P(ie)+"</option>");H.data("item",l),H.attr("value",y),v.$element.append(H)}p||v.pushVal(),v.options.maxTags===v.itemsArray.length&&v.$container.addClass("bootstrap-tagsinput-max"),v.$element.trigger(N.Event("itemAdded",{item:l}))}}},remove:function(l,p){var v=this;v.objectItems&&(typeof l=="object"?l=N.grep(v.itemsArray,function(d){return v.options.itemValue(d)==v.options.itemValue(l)})[0]:l=N.grep(v.itemsArray,function(d){return v.options.itemValue(d)==l})[0]),l&&(N(".tag",v.$container).filter(function(){return N(this).data("item")===l}).remove(),N("option",v.$element).filter(function(){return N(this).data("item")===l}).remove(),v.itemsArray.splice(N.inArray(l,v.itemsArray),1)),p||v.pushVal(),v.options.maxTags>v.itemsArray.length&&v.$container.removeClass("bootstrap-tagsinput-max"),v.$element.trigger(N.Event("itemRemoved",{item:l}))},removeAll:function(){var l=this;for(N(".tag",l.$container).remove(),N("option",l.$element).remove();l.itemsArray.length>0;)l.itemsArray.pop();l.pushVal(),l.options.maxTags&&!this.isEnabled()&&this.enable()},refresh:function(){var l=this;N(".tag",l.$container).each(function(){var p=N(this),v=p.data("item"),d=l.options.itemValue(v),I=l.options.itemText(v),y=l.options.tagClass(v);if(p.attr("class",null),p.addClass("tag "+P(y)),p.contents().filter(function(){return this.nodeType==3})[0].nodeValue=P(I),l.isSelect){var ie=N("option",l.$element).filter(function(){return N(this).data("item")===v});ie.attr("value",d)}})},items:function(){return this.itemsArray},pushVal:function(){var l=this,p=N.map(l.items(),function(v){return l.options.itemValue(v).toString()});l.$element.val(p,!0).trigger("change")},build:function(l){var p=this;p.options=N.extend({},x,l);var v=p.options.typeahead||{};p.objectItems&&(p.options.freeInput=!1),F(p.options,"itemValue"),F(p.options,"itemText"),F(p.options,"tagClass"),p.options.source&&(v.source=p.options.source),v.source&&N.fn.typeahead&&(L(v,"source"),p.$input.typeahead({source:function(d,I){function y(X){for(var ee=[],B=0;B<X.length;B++){var H=p.options.itemText(X[B]);ie[H]=X[B],ee.push(H)}I(ee)}this.map={};var ie=this.map,ae=v.source(d);N.isFunction(ae.success)?ae.success(y):N.when(ae).then(y)},updater:function(d){p.add(this.map[d])},matcher:function(d){return d.toLowerCase().indexOf(this.query.trim().toLowerCase())!==-1},sorter:function(d){return d.sort()},highlighter:function(d){var I=new RegExp("("+this.query+")","gi");return d.replace(I,"<strong>$1</strong>")}})),p.$container.on("click",N.proxy(function(d){p.$input.focus()},p)),p.$container.on("blur","input",N.proxy(function(d){var I=N(d.target);p.add(I.val()),I.val(""),d.preventDefault()},p)),p.$container.on("keydown","input",N.proxy(function(d){var I=N(d.target),y=p.findInputWrapper();switch(d.which){case 8:if(V(I[0])===0){var ie=y.prev();ie&&p.remove(ie.data("item"))}break;case 46:if(V(I[0])===0){var ae=y.next();ae&&p.remove(ae.data("item"))}break;case 37:var X=y.prev();I.val().length===0&&X[0]&&(X.before(y),I.focus());break;case 39:var ee=y.next();I.val().length===0&&ee[0]&&(ee.after(y),I.focus());break;default:p.options.freeInput&&N.inArray(d.which,p.options.confirmKeys)>=0&&(p.add(I.val()),I.val(""),d.preventDefault())}I.attr("size",Math.max(this.inputSize,I.val().length))},p)),p.$container.on("click","[data-role=remove]",N.proxy(function(d){p.remove(N(d.target).closest(".tag").data("item")),d.stopPropagation()},p)),p.options.itemValue===x.itemValue&&(p.$element[0].tagName==="INPUT"?p.add(p.$element.val()):N("option",p.$element).each(function(){p.add(N(this).attr("value"),!0)}))},destroy:function(){var l=this;l.$container.off("keypress","input"),l.$container.off("click","[role=remove]"),l.$container.remove(),l.$element.removeData("tagsinput"),l.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var l=this.$input[0],p=this.$container[0];l&&l.parentNode!==p;)l=l.parentNode;return N(l)}},N.fn.tagsinput=function(l,p){var v=[];return this.each(function(){var d=N(this).data("tagsinput");if(!d)d=new o(this,l),N(this).data("tagsinput",d),v.push(d),this.tagName==="SELECT"&&N("option",N(this)).attr("selected","selected"),N(this).val(N(this).val());else{var I=d[l](p);I!==void 0&&v.push(I)}}),typeof l=="string"?v.length>1?v:v[0]:v},N.fn.tagsinput.Constructor=o;function F(l,p){if(typeof l[p]!="function"){var v=l[p];l[p]=function(d){return d[v]}}}function L(l,p){if(typeof l[p]!="function"){var v=l[p];l[p]=function(){return v}}}var k=N("<div />");function P(l){return l?k.text(l).html():""}function V(l){var p=0;if(document.selection){l.focus();var v=document.selection.createRange();v.moveStart("character",-l.value.length),p=v.text.length}else(l.selectionStart||l.selectionStart=="0")&&(p=l.selectionStart);return p}N(function(){N("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()})})(window.jQuery)}}]);

//# sourceMappingURL=7808.f070fd3d653371de06fb.js.map